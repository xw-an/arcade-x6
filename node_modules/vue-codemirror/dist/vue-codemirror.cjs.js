/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue"),t=require("codemirror"),n=require("@codemirror/state"),o=require("@codemirror/view"),r=require("@codemirror/commands"),a=require("@codemirror/language"),i=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[t.basicSetup]}),u=Symbol("vue-codemirror-global-config");var c,s=function(e){var t=e.onUpdate,r=e.onChange,a=e.onFocus,i=e.onBlur,u=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["onUpdate","onChange","onFocus","onBlur"]);return n.EditorState.create({doc:u.doc,selection:u.selection,extensions:(Array.isArray(u.extensions)?u.extensions:[u.extensions]).concat([o.EditorView.updateListener.of((function(e){t(e),e.docChanged&&r(e.state.doc.toString(),e),e.focusChanged&&(e.view.hasFocus?a(e):i(e))}))])})},l=function(e){return new o.EditorView(Object.assign({},e))},d=function(e){var t=new n.Compartment;return{compartment:t,run:function(o){t.get(e.state)?e.dispatch({effects:t.reconfigure(o)}):e.dispatch({effects:n.StateEffect.appendConfig.of(t.of(o))})}}},f=function(e,t){var n=d(e),o=n.compartment,r=n.run;return function(n){var a=o.get(e.state);r((null!=n?n:a!==t)?t:[])}},m=function(e){var t=function(){return e.state.doc.toString()},i=d(e).run,u=f(e,[o.EditorView.editable.of(!1),n.EditorState.readOnly.of(!0)]),c=f(e,o.keymap.of([r.indentWithTab])),s=d(e).run,l=d(e).run,m=d(e).run,p=d(e).run;return{focus:function(){return e.focus()},getDoc:t,setDoc:function(n){n!==t()&&e.dispatch({changes:{from:0,to:e.state.doc.length,insert:n}})},reExtensions:i,toggleDisabled:u,toggleIndentWithTab:c,setTabSize:function(e){s([n.EditorState.tabSize.of(e),a.indentUnit.of(" ".repeat(e))])},setPhrases:function(e){l([n.EditorState.phrases.of(e)])},setPlaceholder:function(e){m(o.placeholder(e))},setStyle:function(e){void 0===e&&(e={}),p(o.EditorView.theme({"&":Object.assign({},e)}))}}},p={type:Boolean,default:void 0},v={autofocus:p,disabled:p,indentWithTab:p,tabSize:Number,placeholder:String,style:Object,autoDestroy:p,phrases:Object,root:Object,extensions:Array,selection:Object},h={modelValue:{type:String,default:""}},b=Object.assign(Object.assign({},v),h);!function(e){e.Change="change",e.Update="update",e.Focus="focus",e.Blur="blur",e.Ready="ready",e.ModelUpdate="update:modelValue"}(c||(c={}));var g={};g[c.Change]=function(e,t){return!0},g[c.Update]=function(e){return!0},g[c.Focus]=function(e){return!0},g[c.Blur]=function(e){return!0},g[c.Ready]=function(e){return!0};var y={};y[c.ModelUpdate]=g[c.Change];var O=Object.assign(Object.assign({},g),y),w=e.defineComponent({name:"VueCodemirror",props:Object.assign({},b),emits:Object.assign({},O),setup:function(t,n){var o=e.shallowRef(),r=e.shallowRef(),a=e.shallowRef(),d=Object.assign(Object.assign({},i),e.inject(u,{})),f=e.computed((function(){var n={};return Object.keys(e.toRaw(t)).forEach((function(e){var o;"modelValue"!==e&&(n[e]=null!==(o=t[e])&&void 0!==o?o:d[e])})),n}));return e.onMounted((function(){var i;r.value=s({doc:t.modelValue,selection:f.value.selection,extensions:null!==(i=d.extensions)&&void 0!==i?i:[],onFocus:function(e){return n.emit(c.Focus,e)},onBlur:function(e){return n.emit(c.Blur,e)},onUpdate:function(e){return n.emit(c.Update,e)},onChange:function(e,o){e!==t.modelValue&&(n.emit(c.Change,e,o),n.emit(c.ModelUpdate,e,o))}}),a.value=l({state:r.value,parent:o.value,root:f.value.root});var u=m(a.value);e.watch((function(){return t.modelValue}),(function(e){e!==u.getDoc()&&u.setDoc(e)})),e.watch((function(){return t.extensions}),(function(e){return u.reExtensions(e||[])}),{immediate:!0}),e.watch((function(){return f.value.disabled}),(function(e){return u.toggleDisabled(e)}),{immediate:!0}),e.watch((function(){return f.value.indentWithTab}),(function(e){return u.toggleIndentWithTab(e)}),{immediate:!0}),e.watch((function(){return f.value.tabSize}),(function(e){return u.setTabSize(e)}),{immediate:!0}),e.watch((function(){return f.value.phrases}),(function(e){return u.setPhrases(e||{})}),{immediate:!0}),e.watch((function(){return f.value.placeholder}),(function(e){return u.setPlaceholder(e)}),{immediate:!0}),e.watch((function(){return f.value.style}),(function(e){return u.setStyle(e)}),{immediate:!0}),f.value.autofocus&&u.focus(),n.emit(c.Ready,{state:r.value,view:a.value,container:o.value})})),e.onBeforeUnmount((function(){f.value.autoDestroy&&a.value&&function(e){e.destroy()}(a.value)})),function(){return e.h("div",{class:"v-codemirror",style:{display:"contents"},ref:o})}}}),j=w,S=function(e,t){e.component(w.name,w),e.component("Codemirror",w),function(e,t){e.provide(u,t)}(e,t)},x={Codemirror:j,install:S};exports.Codemirror=j,exports.DEFAULT_CONFIG=i,exports.default=x,exports.install=S;//# sourceMappingURL=vue-codemirror.cjs.js.map
