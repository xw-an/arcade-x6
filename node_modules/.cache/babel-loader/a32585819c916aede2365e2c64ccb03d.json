{"remainingRequest":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/babel-loader/lib/index.js!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/FlowLogs.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/FlowLogs.vue","mtime":1688999683380},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/babel-loader/lib/index.js","mtime":1689430342224},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js","mtime":1689430342169},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/babel.config.js","mtime":1667046646049},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/babel-loader/lib/index.js","mtime":1689430342224},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js","mtime":1689430342169}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcXVlcnlMb2dzLCBxdWVyeVRhc2tMb2dzIH0gZnJvbSAiQC9hcGkvcmVxdWVzdCI7CmltcG9ydCB7IHJlZiwgd2F0Y2hFZmZlY3QsIG9uTW91bnRlZCB9IGZyb20gInZ1ZSI7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gInZ1ZS1yb3V0ZXIvZGlzdC92dWUtcm91dGVyIjsKaW1wb3J0IHsgbWVzc2FnZSB9IGZyb20gImFudC1kZXNpZ24tdnVlIjsKY29uc3QgY29sdW1ucyA9IFt7CiAgdGl0bGU6ICfniYjmnKxJZCcsCiAgZGF0YUluZGV4OiAndmVyc2lvbklkJywKICBrZXk6ICd2ZXJzaW9uSWQnLAogIGZpeGVkOiAnbGVmdCcsCiAgd2lkdGg6IDEwMAp9LCB7CiAgdGl0bGU6ICfoioLngrlJZCcsCiAgZGF0YUluZGV4OiAncHJvY2Vzc05vZGVJZCcsCiAga2V5OiAncHJvY2Vzc05vZGVJZCcsCiAgZml4ZWQ6ICdsZWZ0JywKICB3aWR0aDogMTAwCn0sIHsKICB0aXRsZTogJ+e7hOS7tuexu+WeiycsCiAgZGF0YUluZGV4OiAncHJvY2Vzc1R5cGUnLAogIGtleTogJ3Byb2Nlc3NUeXBlJywKICBmaXhlZDogJ2xlZnQnLAogIHdpZHRoOiAyMDAKfSwgewogIHRpdGxlOiAn5YaF5a65JywKICBkYXRhSW5kZXg6ICdtZXNzYWdlJywKICBrZXk6ICdtZXNzYWdlJywKICB3aWR0aDogNTAwCn0sIHsKICB0aXRsZTogJ+aJp+ihjOWPguaVsCcsCiAgZGF0YUluZGV4OiAncHJvY2Vzc1BhcmFtZXRlcicsCiAga2V5OiAncHJvY2Vzc1BhcmFtZXRlcicsCiAgd2lkdGg6IDUwMAp9LCB7CiAgdGl0bGU6ICfmiafooYznu5PmnpwnLAogIGRhdGFJbmRleDogJ3Byb2Nlc3NSZXN1bHQnLAogIGtleTogJ3Byb2Nlc3NSZXN1bHQnLAogIHdpZHRoOiAzODAKfSwgewogIHRpdGxlOiAn5Yib5bu65pe26Ze0JywKICBkYXRhSW5kZXg6ICdjcmVhdGVkVGltZScsCiAga2V5OiAnY3JlYXRlZFRpbWUnLAogIHdpZHRoOiAyMDAKfV07CmNvbnN0IGxhc3RMb2dzID0gcmVmKFtdKTsKCi8vIHRhYumhteWIh+aNogpjb25zdCB1c2VUYWJFZmZlY3QgPSAoKSA9PiB7CiAgY29uc3QgdGFiTGlzdCA9IHJlZihbJ+acgOaWsOaXpeW/lycsICfljoblj7Lml6Xlv5cnXSk7CiAgY29uc3QgYWN0aXZlS2V5ID0gcmVmKCfmnIDmlrDml6Xlv5cnKTsKICBjb25zdCBoYW5kbGVUYWIgPSBpdGVtID0+IHsKICAgIGFjdGl2ZUtleS52YWx1ZSA9IGl0ZW07CiAgfTsKICByZXR1cm4gewogICAgYWN0aXZlS2V5LAogICAgdGFiTGlzdCwKICAgIGhhbmRsZVRhYgogIH07Cn07CgovLyDojrflj5bml6Xlv5cKY29uc3QgdXNlTG9nRWZmZWN0ID0gKCkgPT4gewogIGNvbnN0IHRpbWVMaW5lTGlzdCA9IHJlZihbXSk7CiAgY29uc3QgZ2V0TG9ncyA9IGFzeW5jICh2ZXJzaW9uSWQsIHByb2Nlc3NJbnN0YW5jZUlkKSA9PiB7CiAgICBhd2FpdCBxdWVyeUxvZ3ModmVyc2lvbklkLCBwcm9jZXNzSW5zdGFuY2VJZCkudGhlbihyZXMgPT4gewogICAgICB2YXIgX3JlcyRkYXRhOwogICAgICBpZiAocmVzLmNvZGUgPT09IDAgJiYgKF9yZXMkZGF0YSA9IHJlcy5kYXRhKSAhPT0gbnVsbCAmJiBfcmVzJGRhdGEgIT09IHZvaWQgMCAmJiBfcmVzJGRhdGEubGVuZ3RoKSB7CiAgICAgICAgdGltZUxpbmVMaXN0LnZhbHVlID0gcmVzLmRhdGE7CiAgICAgIH0KICAgIH0pOwogIH07CiAgcmV0dXJuIHsKICAgIHRpbWVMaW5lTGlzdCwKICAgIGdldExvZ3MKICB9Owp9OwoKLy8g5by55Ye65Y6G5Y+y5pel5b+X55qEbW9kYWwKY29uc3QgdXNlTW9kYWxFZmZlY3QgPSAoKSA9PiB7CiAgY29uc3QgdmlzaWJsZSA9IHJlZihmYWxzZSk7CiAgY29uc3QgbG9nRGV0YWlsID0gcmVmKFtdKTsKICBjb25zdCBzaG93TG9nRGV0YWlsID0gaXRlbSA9PiB7CiAgICBsb2dEZXRhaWwudmFsdWUgPSBpdGVtLnByb2Nlc3NJbnN0YW5jZUxvZ3M7CiAgICB2aXNpYmxlLnZhbHVlID0gdHJ1ZTsKICB9OwogIGNvbnN0IGhhbmRsZUNhbmNlbCA9ICgpID0+IHsKICAgIHZpc2libGUudmFsdWUgPSBmYWxzZTsKICAgIGxvZ0RldGFpbC52YWx1ZSA9IFtdOwogIH07CiAgcmV0dXJuIHsKICAgIHZpc2libGUsCiAgICBsb2dEZXRhaWwsCiAgICBzaG93TG9nRGV0YWlsLAogICAgaGFuZGxlQ2FuY2VsCiAgfTsKfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJGbG93TG9nTW9kYWwiLAogIHNldHVwKCkgewogICAgbGV0IHN0b3BQb2xsaW5nID0gcmVmKGZhbHNlKTsKICAgIC8vIOiOt+WPluacgOaWsOaXpeW/l+eahOWHveaVsAogICAgY29uc3QgZmV0Y2hMb2dzID0gYXN5bmMgKCkgPT4gewogICAgICBpZiAocm91dGVyLmN1cnJlbnRSb3V0ZS52YWx1ZS5wYXJhbXMudGFza0lkKSB7CiAgICAgICAgd2hpbGUgKCFzdG9wUG9sbGluZy52YWx1ZSkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgYXdhaXQgcXVlcnlUYXNrTG9ncyhyb3V0ZXIuY3VycmVudFJvdXRlLnZhbHVlLnBhcmFtcy50YXNrSWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09PSAyIHx8IHJlcy5kYXRhLnN0YXR1cyA9PT0gMykgewogICAgICAgICAgICAgICAgc3RvcFBvbGxpbmcudmFsdWUgPSB0cnVlOyAvLyDlvZPlkI7nq6/mjqXlj6Pov5Tlm57nmoRzdGF0dXPkuLoy5oiW6ICFM+aXtu+8jOWBnOatoui9ruivogogICAgICAgICAgICAgICAgcmVzLmRhdGEuc3RhdHVzID09PSAyID8gbWVzc2FnZS5zdWNjZXNzKCfmiafooYzmiJDlip8nKSA6IG1lc3NhZ2UuZXJyb3IoJ+aJp+ihjOWksei0pScpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gMCkgewogICAgICAgICAgICAgICAgdmFyIF9yZXMkZGF0YTI7CiAgICAgICAgICAgICAgICBsYXN0TG9ncy52YWx1ZSA9IChfcmVzJGRhdGEyID0gcmVzLmRhdGEpID09PSBudWxsIHx8IF9yZXMkZGF0YTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXMkZGF0YTIucHJvY2Vzc0luc3RhbmNlTG9nczsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5pel5b+X5byC5bi4OicsIGVycm9yKTsKICAgICAgICAgIH0KICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDAwKSk7IC8vIOavj+malDHnp5Lov5vooYzkuIDmrKHova7or6IKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgY29uc3QgewogICAgICBhY3RpdmVLZXksCiAgICAgIHRhYkxpc3QsCiAgICAgIGhhbmRsZVRhYgogICAgfSA9IHVzZVRhYkVmZmVjdCgpOwogICAgY29uc3QgewogICAgICB0aW1lTGluZUxpc3QsCiAgICAgIGdldExvZ3MKICAgIH0gPSB1c2VMb2dFZmZlY3QoKTsKICAgIGNvbnN0IHsKICAgICAgdmlzaWJsZSwKICAgICAgbG9nRGV0YWlsLAogICAgICBzaG93TG9nRGV0YWlsLAogICAgICBoYW5kbGVDYW5jZWwKICAgIH0gPSB1c2VNb2RhbEVmZmVjdCgpOwogICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICB3YXRjaEVmZmVjdCgoKSA9PiB7CiAgICAgIGlmIChhY3RpdmVLZXkudmFsdWUgPT09ICfljoblj7Lml6Xlv5cnKSB7CiAgICAgICAgZ2V0TG9ncyhyb3V0ZXIuY3VycmVudFJvdXRlLnZhbHVlLnBhcmFtcy52ZXJzaW9uSWQsIHJvdXRlci5jdXJyZW50Um91dGUudmFsdWUucGFyYW1zLnByb2Nlc3NJbnN0YW5jZUlkKTsKICAgICAgfQogICAgfSk7CiAgICBvbk1vdW50ZWQoZmV0Y2hMb2dzKTsgLy8g57uE5Lu25oyC6L295pe25byA5aeL6LCD55SoZmV0Y2hMb2dz5Ye95pWw6L+b6KGM6L2u6K+iCiAgICByZXR1cm4gewogICAgICBjb2x1bW5zLAogICAgICBsYXN0TG9ncywKICAgICAgcXVlcnlUYXNrTG9ncywKICAgICAgYWN0aXZlS2V5LAogICAgICB0YWJMaXN0LAogICAgICBoYW5kbGVUYWIsCiAgICAgIHRpbWVMaW5lTGlzdCwKICAgICAgdmlzaWJsZSwKICAgICAgbG9nRGV0YWlsLAogICAgICBzaG93TG9nRGV0YWlsLAogICAgICBoYW5kbGVDYW5jZWwsCiAgICAgIHN0b3BQb2xsaW5nCiAgICB9OwogIH0KfTs="},{"version":3,"mappings":"AA8GA,SAAQA,SAAS,EAAEC,aAAa,QAAO,eAAe;AACtD,SAAQC,GAAG,EAAEC,WAAW,EAACC,SAAS,QAAO,KAAK;AAC9C,SAAQC,SAAS,QAAO,4BAA4B;AACpD,SAAQC,OAAO,QAAO,gBAAgB;AAEtC,MAAMC,OAAM,GAAI,CACd;EACEC,KAAK,EAAE,MAAM;EACbC,SAAS,EAAE,WAAW;EACtBC,GAAG,EAAE,WAAW;EAChBC,KAAK,EAAE,MAAM;EACbC,KAAK,EAAE;AACT,CAAC,EACD;EACEJ,KAAK,EAAE,MAAM;EACbC,SAAS,EAAE,eAAe;EAC1BC,GAAG,EAAE,eAAe;EACpBC,KAAK,EAAE,MAAM;EACbC,KAAK,EAAE;AACT,CAAC,EACD;EACEJ,KAAK,EAAE,MAAM;EACbC,SAAS,EAAE,aAAa;EACxBC,GAAG,EAAE,aAAa;EAClBC,KAAK,EAAE,MAAM;EACbC,KAAK,EAAE;AACT,CAAC,EACD;EACEJ,KAAK,EAAE,IAAI;EACXC,SAAS,EAAE,SAAS;EACpBC,GAAG,EAAE,SAAS;EACdE,KAAK,EAAE;AACT,CAAC,EACD;EACEJ,KAAK,EAAE,MAAM;EACbC,SAAS,EAAE,kBAAkB;EAC7BC,GAAG,EAAE,kBAAkB;EACvBE,KAAK,EAAE;AACT,CAAC,EACD;EACEJ,KAAK,EAAE,MAAM;EACbC,SAAS,EAAE,eAAe;EAC1BC,GAAG,EAAE,eAAe;EACpBE,KAAK,EAAE;AACT,CAAC,EACD;EACEJ,KAAK,EAAE,MAAM;EACbC,SAAS,EAAE,aAAa;EACxBC,GAAG,EAAE,aAAa;EAClBE,KAAK,EAAE;AACT,EACF;AACA,MAAMC,QAAO,GAAIX,GAAG,CAAC,EAAE;;AAEvB;AACA,MAAMY,YAAW,GAAI,MAAI;EACvB,MAAMC,OAAM,GAAIb,GAAG,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;EACrC,MAAMc,SAAQ,GAAId,GAAG,CAAC,MAAM,CAAC;EAC7B,MAAMe,SAAQ,GAAKC,IAAI,IAAK;IAC1BF,SAAS,CAACG,KAAI,GAAID,IAAG;EACvB;EACA,OAAO;IAACF,SAAS;IAACD,OAAO;IAACE;EAAS;AACrC;;AAEA;AACA,MAAMG,YAAW,GAAI,MAAI;EACvB,MAAMC,YAAW,GAAInB,GAAG,CAAC,EAAE;EAC3B,MAAMoB,OAAM,GAAI,OAAOC,SAAS,EAACC,iBAAiB,KAAG;IACnD,MAAMxB,SAAS,CAACuB,SAAS,EAACC,iBAAiB,CAAC,CAACC,IAAI,CAACC,GAAG,IAAE;MAAA;MACrD,IAAIA,GAAG,CAACC,IAAG,KAAM,kBAAKD,GAAG,CAACE,IAAI,sCAAR,UAAUC,MAAM,EAAC;QACrCR,YAAY,CAACF,KAAI,GAAIO,GAAG,CAACE,IAAG;MAC9B;IACF,CAAC;EACH;EACA,OAAO;IAACP,YAAY;IAACC;EAAO;AAC9B;;AAEA;AACA,MAAMQ,cAAa,GAAI,MAAM;EAC3B,MAAMC,OAAM,GAAI7B,GAAG,CAAC,KAAK;EACzB,MAAM8B,SAAQ,GAAI9B,GAAG,CAAC,EAAE;EACxB,MAAM+B,aAAY,GAAKf,IAAI,IAAG;IAC5Bc,SAAS,CAACb,KAAI,GAAID,IAAI,CAACgB,mBAAkB;IACzCH,OAAO,CAACZ,KAAI,GAAI,IAAG;EACrB;EACA,MAAMgB,YAAW,GAAI,MAAI;IACvBJ,OAAO,CAACZ,KAAI,GAAI,KAAI;IACpBa,SAAS,CAACb,KAAI,GAAI,EAAC;EACrB;EACA,OAAO;IAACY,OAAO;IAACC,SAAS;IAACC,aAAa;IAACE;EAAY;AACtD;AAEA,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,KAAK,GAAE;IACL,IAAIC,WAAU,GAAIpC,GAAG,CAAC,KAAK;IAC3B;IACA,MAAMqC,SAAQ,GAAI,YAAY;MAC5B,IAAIC,MAAM,CAACC,YAAY,CAACtB,KAAK,CAACuB,MAAM,CAACC,MAAM,EAAE;QAC3C,OAAO,CAACL,WAAW,CAACnB,KAAK,EAAE;UACzB,IAAI;YACF,MAAMlB,aAAa,CAACuC,MAAM,CAACC,YAAY,CAACtB,KAAK,CAACuB,MAAM,CAACC,MAAM,CAAC,CAAClB,IAAI,CAACC,GAAG,IAAE;cACrE,IAAIA,GAAG,CAACE,IAAI,CAACgB,MAAK,KAAM,KAAKlB,GAAG,CAACE,IAAI,CAACgB,MAAK,KAAM,CAAC,EAAE;gBAClDN,WAAW,CAACnB,KAAI,GAAI,IAAI,EAAE;gBAC1BO,GAAG,CAACE,IAAI,CAACgB,MAAK,KAAM,CAAC,GAACtC,OAAO,CAACuC,OAAO,CAAC,MAAM,CAAC,GAACvC,OAAO,CAACwC,KAAK,CAAC,MAAM;cACpE;cACA,IAAIpB,GAAG,CAACC,IAAG,IAAK,CAAC,EAAC;gBAAA;gBAChBd,QAAQ,CAACM,KAAI,iBAAIO,GAAG,CAACE,IAAI,+CAAR,WAAUM,mBAAkB;cAC/C;YACF,CAAC;UACH,EACA,OAAOY,KAAK,EAAE;YACZC,OAAO,CAACD,KAAK,CAAC,SAAS,EAAEA,KAAK;UAChC;UACA,MAAM,IAAIE,OAAO,CAACC,OAAM,IAAKC,UAAU,CAACD,OAAO,EAAE,IAAI,CAAC,CAAC,EAAE;QAC3D;MACF;IACF;;IACA,MAAM;MAACjC,SAAS;MAACD,OAAO;MAACE;IAAS,IAAIH,YAAY,EAAC;IACnD,MAAM;MAACO,YAAY;MAACC;IAAO,IAAIF,YAAY,EAAC;IAC5C,MAAM;MAACW,OAAO;MAACC,SAAS;MAACC,aAAa;MAACE;IAAY,IAAIL,cAAc,EAAC;IACtE,MAAMU,MAAK,GAAInC,SAAS,EAAC;IACzBF,WAAW,CAAC,MAAI;MACd,IAAGa,SAAS,CAACG,KAAK,KAAG,MAAM,EAAE;QAC3BG,OAAO,CAACkB,MAAM,CAACC,YAAY,CAACtB,KAAK,CAACuB,MAAM,CAACnB,SAAS,EAACiB,MAAM,CAACC,YAAY,CAACtB,KAAK,CAACuB,MAAM,CAAClB,iBAAiB;MACvG;IACF,CAAC;IACDpB,SAAS,CAACmC,SAAS,CAAC,EAAE;IACtB,OAAO;MACLhC,OAAO;MAACM,QAAQ;MAACZ,aAAa;MAACe,SAAS;MAACD,OAAO;MAACE,SAAS;MAACI,YAAY;MACvEU,OAAO;MAACC,SAAS;MAACC,aAAa;MAACE,YAAY;MAACG;IAC/C;EACF;AACF","names":["queryLogs","queryTaskLogs","ref","watchEffect","onMounted","useRouter","message","columns","title","dataIndex","key","fixed","width","lastLogs","useTabEffect","tabList","activeKey","handleTab","item","value","useLogEffect","timeLineList","getLogs","versionId","processInstanceId","then","res","code","data","length","useModalEffect","visible","logDetail","showLogDetail","processInstanceLogs","handleCancel","name","setup","stopPolling","fetchLogs","router","currentRoute","params","taskId","status","success","error","console","Promise","resolve","setTimeout"],"sourceRoot":"","sources":["/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/FlowLogs.vue"],"sourcesContent":["<template>\n  <div style=\"width: 100%;height: 100%\" class=\"flow-logs\">\n    <a-row style=\"width: 100%;height: 100%;margin-bottom: 12px;margin-top: 15px\">\n      <a-col :span=\"24\" style=\"text-align: center\">\n        <h2 style=\"font-size: 26px; color: rgb(24, 24, 24); line-height: 42px;\">{{$router.currentRoute.value.params.name+' (版本ID:'+$router.currentRoute.value.params.versionId+')'}}</h2>\n      </a-col>\n    </a-row>\n    <div class=\"wrap\">\n    <div class=\"tabGroup\">\n      <div class=\"swiper-container\">\n        <div class=\"swiper-wrapper\" style=\"transform: translate3d(0px, 0px, 0px); transition: all 250ms linear 0s;\">\n          <div :class=\"{'tab': true, 'off':item!=activeKey,'on': item===activeKey,'swiper-slide':true}\" style=\"width: 50%;\"\n               v-for=\"item in tabList\" :key=\"item\"\n               @click=\"handleTab(item)\"\n          >\n            <span class=\"innerText\">{{item}}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"contents\">\n      <div class=\"content\" v-if=\"activeKey==='最新日志'\">\n        <a-spin :spinning=\"!stopPolling\">\n          <a-row style=\"width: 100%;height: 100%\">\n            <a-col :span=\"24\">\n              <a-table :columns=\"columns\" :data-source=\"lastLogs\" :scroll=\"{ x: 1500,y: 1000}\" :pagination=\"false\">\n                <template #bodyCell=\"{ column, text }\">\n                  <template v-if=\"column.dataIndex === 'createdTime'\">\n                    <span>{{$moment(text).format('YYYY-MM-DD HH:mm:ss')}}</span>\n                  </template>\n                  <template v-else-if=\"column.dataIndex === 'processParameter'\">\n                    <span v-if=\"text\">{{text}}</span>\n                    <span v-else>--</span>\n                  </template>\n                  <template v-else-if=\"column.dataIndex === 'processResult'\">\n                    <span v-if=\"text\">{{text}}</span>\n                    <span v-else>--</span>\n                  </template>\n                  <template v-else-if=\"column.dataIndex === 'processType'\">\n                    <span v-if=\"text\">{{text}}</span>\n                    <span v-else>--</span>\n                  </template>\n                  <template v-else-if=\"column.dataIndex === 'processNodeId'\">\n                    <span v-if=\"text\">{{text}}</span>\n                    <span v-else>--</span>\n                  </template>\n                </template>\n              </a-table>\n            </a-col>\n          </a-row>\n        </a-spin>\n      </div>\n      <div class=\"content\" v-else-if=\"activeKey==='历史日志'\">\n        <div style=\"width: 100%;height: 100%;background: #fff\">\n          <a-timeline class=\"timeline—group\" v-if=\"timeLineList.length\">\n            <a-timeline-item v-for=\"(item,index) of timeLineList\" :key=\"index\">\n              <p>\n                <span>{{'日志ID:'+item.taskId+'\\n'+item.createdBy+'\\n'+$moment(item.createdTime).format('YYYY-MM-DD HH:mm:ss')+'\\n'}}</span>\n                <a v-if=\"item.status==0\" @click=\"showLogDetail(item)\">执行状态: 已经启动</a>\n                <a v-else-if=\"item.status==1\" @click=\"showLogDetail(item)\">执行状态: 正在运行</a>\n                <a v-else-if=\"item.status==2\" @click=\"showLogDetail(item)\">执行状态: 执行成功</a>\n                <a v-else-if=\"item.status==3\" @click=\"showLogDetail(item)\">执行状态: 执行失败</a>\n              </p>\n            </a-timeline-item>\n          </a-timeline>\n          <div v-else class=\"system-no-content\">\n            <img src=\"@/assets/images/noDataDefault.svg\" class=\"system-no-content-image\"><br/>\n            <span class=\"system-no-content-text\">暂无运行记录</span>\n          </div>\n          <a-modal v-model:visible=\"visible\" title=\"日志详情\"\n                   :footer=\"null\"\n                   style=\"height: 100%;width: 100%;\"\n                   wrap-class-name=\"log-full-modal\"\n                   :destroyOnClose=true\n                   @cancel=\"handleCancel\"\n          >\n            <div style=\"width: 100%;height:100%;\">\n              <a-table :columns=\"columns\" :data-source=\"logDetail\" :scroll=\"{ x: 1500,y: 1000}\" :pagination=\"false\">\n                <template #bodyCell=\"{ column, text }\">\n                  <template v-if=\"column.dataIndex === 'createdTime'\">\n                    <span>{{$moment(text).format('YYYY-MM-DD HH:mm:ss')}}</span>\n                  </template>\n                  <template v-else-if=\"column.dataIndex === 'processParameter'\">\n                    <span v-if=\"text\">{{text}}</span>\n                    <span v-else>--</span>\n                  </template>\n                  <template v-else-if=\"column.dataIndex === 'processResult'\">\n                    <span v-if=\"text\">{{text}}</span>\n                    <span v-else>--</span>\n                  </template>\n                  <template v-else-if=\"column.dataIndex === 'processType'\">\n                    <span v-if=\"text\">{{text}}</span>\n                    <span v-else>--</span>\n                  </template>\n                  <template v-else-if=\"column.dataIndex === 'processNodeId'\">\n                    <span v-if=\"text\">{{text}}</span>\n                    <span v-else>--</span>\n                  </template>\n                </template>\n              </a-table>\n            </div>\n          </a-modal>\n        </div>\n      </div>\n    </div>\n  </div>\n  </div>\n</template>\n\n<script>\nimport {queryLogs, queryTaskLogs} from \"@/api/request\";\nimport {ref, watchEffect,onMounted} from \"vue\";\nimport {useRouter} from \"vue-router/dist/vue-router\";\nimport {message} from \"ant-design-vue\";\n\nconst columns = [\n  {\n    title: '版本Id',\n    dataIndex: 'versionId',\n    key: 'versionId',\n    fixed: 'left',\n    width: 100\n  },\n  {\n    title: '节点Id',\n    dataIndex: 'processNodeId',\n    key: 'processNodeId',\n    fixed: 'left',\n    width: 100\n  },\n  {\n    title: '组件类型',\n    dataIndex: 'processType',\n    key: 'processType',\n    fixed: 'left',\n    width: 200\n  },\n  {\n    title: '内容',\n    dataIndex: 'message',\n    key: 'message',\n    width: 500\n  },\n  {\n    title: '执行参数',\n    dataIndex: 'processParameter',\n    key: 'processParameter',\n    width: 500\n  },\n  {\n    title: '执行结果',\n    dataIndex: 'processResult',\n    key: 'processResult',\n    width: 380\n  },\n  {\n    title: '创建时间',\n    dataIndex: 'createdTime',\n    key: 'createdTime',\n    width: 200\n  }\n]\nconst lastLogs = ref([])\n\n// tab页切换\nconst useTabEffect = ()=>{\n  const tabList = ref(['最新日志', '历史日志']);\n  const activeKey = ref('最新日志');\n  const handleTab = (item) => {\n    activeKey.value = item\n  }\n  return {activeKey,tabList,handleTab}\n}\n\n// 获取日志\nconst useLogEffect = ()=>{\n  const timeLineList = ref([])\n  const getLogs = async (versionId,processInstanceId)=>{\n    await queryLogs(versionId,processInstanceId).then(res=>{\n      if (res.code === 0 && res.data?.length){\n        timeLineList.value = res.data\n      }\n    })\n  }\n  return {timeLineList,getLogs}\n}\n\n// 弹出历史日志的modal\nconst useModalEffect = () => {\n  const visible = ref(false)\n  const logDetail = ref([])\n  const showLogDetail = (item)=>{\n    logDetail.value = item.processInstanceLogs\n    visible.value = true\n  }\n  const handleCancel = ()=>{\n    visible.value = false\n    logDetail.value = []\n  }\n  return {visible,logDetail,showLogDetail,handleCancel}\n}\n\nexport default {\n  name: \"FlowLogModal\",\n  setup(){\n    let stopPolling = ref(false)\n    // 获取最新日志的函数\n    const fetchLogs = async () => {\n      if (router.currentRoute.value.params.taskId) {\n        while (!stopPolling.value) {\n          try {\n            await queryTaskLogs(router.currentRoute.value.params.taskId).then(res=>{\n              if (res.data.status === 2 || res.data.status === 3) {\n                stopPolling.value = true; // 当后端接口返回的status为2或者3时，停止轮询\n                res.data.status === 2?message.success('执行成功'):message.error('执行失败')\n              }\n              if (res.code == 0){\n                lastLogs.value = res.data?.processInstanceLogs\n              }\n            })\n          }\n          catch (error) {\n            console.error('获取日志异常:', error)\n          }\n          await new Promise(resolve => setTimeout(resolve, 2000)); // 每隔1秒进行一次轮询\n        }\n      }\n    }\n    const {activeKey,tabList,handleTab} = useTabEffect()\n    const {timeLineList,getLogs} = useLogEffect()\n    const {visible,logDetail,showLogDetail,handleCancel} = useModalEffect()\n    const router = useRouter()\n    watchEffect(()=>{\n      if(activeKey.value==='历史日志') {\n        getLogs(router.currentRoute.value.params.versionId,router.currentRoute.value.params.processInstanceId)\n      }\n    })\n    onMounted(fetchLogs); // 组件挂载时开始调用fetchLogs函数进行轮询\n    return {\n      columns,lastLogs,queryTaskLogs,activeKey,tabList,handleTab,timeLineList,\n      visible,logDetail,showLogDetail,handleCancel,stopPolling\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n.flow-logs .wrap {\n  margin: 0 auto;\n  padding-bottom: 10px;\n  width: 95%;\n}\n.flow-logs .tabGroup {\n  border: 1px solid #ededed;\n  display: flex;\n}\n.flow-logs .swiper-container {\n  width: 100%;\n  margin-left: auto;\n  margin-right: auto;\n  position: relative;\n  overflow: hidden;\n  list-style: none;\n  padding: 0;\n  z-index: 1;\n}\n.flow-logs .swiper-wrapper {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n  display: flex;\n  box-sizing: content-box;\n}\n.flow-logs .on {\n  position: relative;\n  color: #181818;\n}\n.flow-logs .on:before {\n  position: absolute;\n  top: -1px;\n  left: 0;\n  display: block;\n  content: \"\";\n  width: 100%;\n  height: 4px;\n  transform: scale(1);\n  background-color: #ff6a00;\n}\n.flow-logs .on:after {\n  position: absolute;\n  display: block;\n  transform: scale(1);\n  content: \"\";\n  width: 100%;\n  height: 50px;\n  z-index: 5;\n  background-color: #fff;\n  box-shadow: 0 0 15px 0 rgba(0, 0, 0, .1);\n}\n.flow-logs .tab {\n  display: inline-block;\n  vertical-align: middle;\n  height: 50px;\n  line-height: 50px;\n  text-align: center;\n  font-size: 16px;\n  cursor: pointer;\n  border-right: 1px solid #ededed;\n  background-color: #fff;\n  transition: all .1s ease-in;\n}\n.flow-logs .tab:before {\n  z-index: 10;\n}\n.flow-logs .tab:after{\n  top: 0;\n  left: 0;\n}\n.flow-logs .off {\n  position: relative;\n  display: inline-block;\n  vertical-align: middle;\n  height: 50px;\n  line-height: 50px;\n  text-align: center;\n  font-size: 16px;\n  color: #999;\n  cursor: pointer;\n  border-right: 1px solid #ededed;\n  background-color: #fff;\n  transition: all .1s ease-in;\n}\n.flow-logs .off:before {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 10;\n  display: block;\n  content: \"\";\n  width: 100%;\n  height: 4px;\n  background-color: transparent;\n}\n.flow-logs .off:after {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: block;\n  content: \"\";\n  width: 100%;\n  height: 100%;\n}\n.flow-logs .tab:hover:before {\n  position: absolute;\n  top: -1px;\n  left: 0;\n  display: block;\n  content: \"\";\n  width: 100%;\n  height: 4px;\n  transform: scale(1);\n  background-color: #ff6a00;\n}\n.flow-logs .tab:hover {\n  color: #181818;\n}\n.flow-logs .swiper-slide{\n  flex-shrink: 0;\n}\n.flow-logs .innerText {\n  position: relative;\n  z-index: 10;\n}\n.flow-logs .contents {\n  display: block;\n  background: #fafafa;\n  width: 100%!important;\n  height: auto;\n  border: 1px solid #ededed;\n  border-top: none;\n}\n.flow-logs .content {\n  display: block;\n  width: 100%;\n  height: auto;\n}\n.flow-logs .timeline—group {\n  padding-top: 25px;\n  padding-left: 20px;\n}\n.log-full-modal {\n  .ant-modal {\n    max-width: 100%;\n    top: 0;\n    padding-bottom: 0;\n    margin: 0;\n  }\n  .ant-modal-content {\n    display: flex;\n    flex-direction: column;\n    height: auto;\n    min-height: calc(100vh);\n    overflow: auto;\n  }\n  .ant-modal-body {\n    flex: 1;\n  }\n}\n.system-no-content {\n  width: 100%;\n  text-align: center;\n  padding-top: 120px;\n  margin-bottom: 50px;\n  font-size: 15px;\n  min-height: 380px;\n}\n.system-no-content-image {\n  margin: 10px;\n}\n.system-no-content-text {\n  color: #999;\n}\n</style>\n"]}]}