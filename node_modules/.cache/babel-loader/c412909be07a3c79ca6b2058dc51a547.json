{"remainingRequest":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/babel-loader/lib/index.js!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/components/param/ExtractParamConfig.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/components/param/ExtractParamConfig.vue","mtime":1688896323629},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/babel.config.js","mtime":1667046646049},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/babel-loader/lib/index.js","mtime":1689430342224},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js","mtime":1689430342169}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IHJlYWN0aXZlLCByZWYsIHdhdGNoRWZmZWN0IH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgcXVlcnlWYXJpYWJsZXMsIHVwZGF0ZU5vZGUgfSBmcm9tICJAL2FwaS9yZXF1ZXN0IjsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAidnVlLXJvdXRlci9kaXN0L3Z1ZS1yb3V0ZXIiOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gInZ1ZXgiOwppbXBvcnQgeyBtZXNzYWdlIH0gZnJvbSAiYW50LWRlc2lnbi12dWUiOwpjb25zdCBwcm9jZXNzSW5zdGFuY2VJZCA9IHJlZigwKTsKY29uc3QgYXV0aG9yID0gcmVmKCcnKTsKCi8vIOaPkOWPluWPmOmHj+WQjemAieaLqeWZqApjb25zdCB1c2VWYXJpYWJsZU5hbWVFZmZlY3QgPSBwcm9wcyA9PiB7CiAgY29uc3QgdmFyaWFibGVPcHRpb25zID0gcmVmKFtdKTsKICBjb25zdCBxdWVyeVZhcmlhYmxlc0xpc3QgPSBhc3luYyAoKSA9PiB7CiAgICBhd2FpdCBxdWVyeVZhcmlhYmxlcyhwcm9wcy52ZXJzaW9uSWQsIHByb2Nlc3NJbnN0YW5jZUlkLnZhbHVlKS50aGVuKHJlcyA9PiB7CiAgICAgIGlmIChyZXMuY29kZSA9PT0gMCAmJiByZXMuZGF0YSkgewogICAgICAgIHJlcy5kYXRhLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICB2YXJpYWJsZU9wdGlvbnMudmFsdWUucHVzaCh7CiAgICAgICAgICAgIHZhbHVlOiBpdGVtLAogICAgICAgICAgICBsYWJlbDogaXRlbQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH07CiAgd2F0Y2hFZmZlY3QoKCkgPT4gewogICAgaWYgKHByb3BzLmFjdGl2ZUtleSA9PSAnMScpIHsKICAgICAgcXVlcnlWYXJpYWJsZXNMaXN0KCk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIHsKICAgIHZhcmlhYmxlT3B0aW9ucwogIH07Cn07CgovLyDmj5Dlj5bnu4Tku7YKY29uc3QgdXNlVmFyaWFibGVFZmZlY3QgPSAocHJvcHMsIGN0eCkgPT4gewogIGNvbnN0IGZvcm1SdWxlID0gcmVmKHt9KTsKICBjb25zdCBmb3JtRXh0cmFjdFBhcmFtID0gcmVhY3RpdmUoewogICAgZXh0cmFjdExpc3Q6IFt7CiAgICAgIG9sZFZhcmlhYmxlTmFtZTogJycsCiAgICAgIGV4cHJlc3Npb246ICcnLAogICAgICBuZXdWYXJpYWJsZU5hbWU6ICcnCiAgICB9XQogIH0pOwogIHdhdGNoRWZmZWN0KCgpID0+IHsKICAgIGlmIChwcm9wcy5hY3RpdmVLZXkgPT0gJzEnICYmIHByb3BzLm5vZGVQYXJhbXMpIHsKICAgICAgbGV0IGpzb25QYXJhbXMgPSBwcm9wcy5ub2RlUGFyYW1zLnByb2Nlc3NJbnN0YW5jZVBhcmFtZXRlci5wYXJhbWV0ZXJWYWx1ZSA/IEpTT04ucGFyc2UocHJvcHMubm9kZVBhcmFtcy5wcm9jZXNzSW5zdGFuY2VQYXJhbWV0ZXIucGFyYW1ldGVyVmFsdWUpIDogbnVsbDsKICAgICAgZm9ybUV4dHJhY3RQYXJhbS5leHRyYWN0TGlzdCA9IGpzb25QYXJhbXMgPyBqc29uUGFyYW1zLmV4dHJhY3RMaXN0IDogW3sKICAgICAgICBvbGRWYXJpYWJsZU5hbWU6ICcnLAogICAgICAgIGV4cHJlc3Npb246ICcnLAogICAgICAgIG5ld1ZhcmlhYmxlTmFtZTogJycKICAgICAgfV07CiAgICB9CiAgfSk7CiAgY29uc3QgYWRkQ29uZGl0aW9uID0gKCkgPT4gewogICAgZm9ybUV4dHJhY3RQYXJhbS5leHRyYWN0TGlzdC5wdXNoKHsKICAgICAgb2xkVmFyaWFibGVOYW1lOiAnJywKICAgICAgZXhwcmVzc2lvbjogJycsCiAgICAgIG5ld1ZhcmlhYmxlTmFtZTogJycKICAgIH0pOwogIH07CiAgY29uc3QgcmVtb3ZlQ29uZGl0aW9uID0gaXRlbSA9PiB7CiAgICBsZXQgaW5kZXggPSBmb3JtRXh0cmFjdFBhcmFtLmV4dHJhY3RMaXN0LmluZGV4T2YoaXRlbSk7CiAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgIGZvcm1FeHRyYWN0UGFyYW0uZXh0cmFjdExpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIH0KICB9OwogIGNvbnN0IHNhdmVQYXJhbXMgPSBhc3luYyBub2RlID0+IHsKICAgIGZvcm1SdWxlLnZhbHVlLnZhbGlkYXRlRmllbGRzKCkudGhlbihhc3luYyAoKSA9PiB7CiAgICAgIGxldCByZXEgPSB7CiAgICAgICAgInByb2Nlc3NOb2RlIjogewogICAgICAgICAgInZlcnNpb25JZCI6IHByb3BzLnZlcnNpb25JZCwKICAgICAgICAgICJwcm9jZXNzSW5zdGFuY2VJZCI6IHByb2Nlc3NJbnN0YW5jZUlkLnZhbHVlLAogICAgICAgICAgInV1aWQiOiBub2RlLmlkLAogICAgICAgICAgInVwZGF0ZWRCeSI6IGF1dGhvci52YWx1ZQogICAgICAgIH0sCiAgICAgICAgInByb2Nlc3NJbnN0YW5jZVBhcmFtZXRlciI6IFt7CiAgICAgICAgICAidmVyc2lvbklkIjogcHJvcHMudmVyc2lvbklkLAogICAgICAgICAgInBhcmFtZXRlclR5cGUiOiAi5Y+C5pWw5L+h5oGvIiwKICAgICAgICAgICJwYXJhbWV0ZXJOYW1lIjogInBhcmFtcyIsCiAgICAgICAgICAicGFyYW1ldGVyVmFsdWUiOiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgIGV4dHJhY3RMaXN0OiBmb3JtRXh0cmFjdFBhcmFtLmV4dHJhY3RMaXN0CiAgICAgICAgICB9KSwKICAgICAgICAgICJ1cGRhdGVkQnkiOiBhdXRob3IudmFsdWUKICAgICAgICB9XQogICAgICB9OwogICAgICBhd2FpdCB1cGRhdGVOb2RlKHJlcSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgbWVzc2FnZS5zdWNjZXNzKCLlj4LmlbDmm7TmlrDmiJDlip87IiArICJpZDoiICsgbm9kZS5pZCk7CiAgICAgICAgICBjdHguZW1pdCgnY2xvc2UnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbWVzc2FnZS5lcnJvcigi5Y+C5pWw5pu05paw5aSx6LSlOyIgKyByZXMubWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgbWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5a6M5b+F5aGr6aG5Jyk7CiAgICB9KTsKICB9OwogIHJldHVybiB7CiAgICBmb3JtUnVsZSwKICAgIGZvcm1FeHRyYWN0UGFyYW0sCiAgICBhZGRDb25kaXRpb24sCiAgICByZW1vdmVDb25kaXRpb24sCiAgICBzYXZlUGFyYW1zCiAgfTsKfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJFeHRyYWN0UGFyYW1Db25maWciLAogIHByb3BzOiBbJ25vZGUnLCAnYWN0aXZlS2V5JywgJ25vZGVQYXJhbXMnLCAndmVyc2lvbklkJ10sCiAgZW1pdHM6IFsnY2xvc2UnXSwKICBzZXR1cChwcm9wcywgY3R4KSB7CiAgICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICAgIGNvbnN0IHN0b3JlID0gdXNlU3RvcmUoKTsKICAgIHByb2Nlc3NJbnN0YW5jZUlkLnZhbHVlID0gcm91dGVyLmN1cnJlbnRSb3V0ZS52YWx1ZS5wYXJhbXMucHJvY2Vzc0luc3RhbmNlSWQ7CiAgICBhdXRob3IudmFsdWUgPSBzdG9yZS5zdGF0ZS51c2VyLmFjY291bnQ7CiAgICBjb25zdCB7CiAgICAgIHZhcmlhYmxlT3B0aW9ucwogICAgfSA9IHVzZVZhcmlhYmxlTmFtZUVmZmVjdChwcm9wcyk7CiAgICBjb25zdCB7CiAgICAgIGZvcm1SdWxlLAogICAgICBmb3JtRXh0cmFjdFBhcmFtLAogICAgICBhZGRDb25kaXRpb24sCiAgICAgIHJlbW92ZUNvbmRpdGlvbiwKICAgICAgc2F2ZVBhcmFtcwogICAgfSA9IHVzZVZhcmlhYmxlRWZmZWN0KHByb3BzLCBjdHgpOwogICAgcmV0dXJuIHsKICAgICAgZm9ybVJ1bGUsCiAgICAgIGZvcm1FeHRyYWN0UGFyYW0sCiAgICAgIHZhcmlhYmxlT3B0aW9ucywKICAgICAgYWRkQ29uZGl0aW9uLAogICAgICByZW1vdmVDb25kaXRpb24sCiAgICAgIHNhdmVQYXJhbXMKICAgIH07CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["reactive","ref","watchEffect","queryVariables","updateNode","useRouter","useStore","message","processInstanceId","author","useVariableNameEffect","props","variableOptions","queryVariablesList","versionId","value","then","res","code","data","forEach","item","push","label","activeKey","useVariableEffect","ctx","formRule","formExtractParam","extractList","oldVariableName","expression","newVariableName","nodeParams","jsonParams","processInstanceParameter","parameterValue","JSON","parse","addCondition","removeCondition","index","indexOf","splice","saveParams","node","validateFields","req","id","stringify","success","emit","error","catch","name","emits","setup","router","store","currentRoute","params","state","user","account"],"sourceRoot":"","sources":["/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/components/param/ExtractParamConfig.vue"],"sourcesContent":["<template>\n  <a-form ref=\"formRule\" :model=\"formExtractParam\" :label-col=\"{span: 4}\" :wrapper-col=\"{span: 19,offset: 1}\" style=\"overflow: auto\">\n    <a-card style=\"margin-left: 10px;margin-right: 10px;margin-top:15px;\" v-for=\"(item,index) in formExtractParam.extractList\" :key=\"index\">\n      <a-row style=\"width: 100%;\">\n        <a-col :span=\"23\"></a-col>\n        <a-col :span=\"1\" style=\"text-align: right;margin-bottom: 10px\">\n          <MinusCircleOutlined style=\"color: #1890ff\" @click=\"removeCondition(item)\"/>\n        </a-col>\n      </a-row>\n      <a-form-item label=\"原变量\" :name=\"['extractList',index,'oldVariableName']\" :rules=\"{required: true,message: '原变量必选'}\">\n        <a-select v-model:value=\"item.oldVariableName\" :options=\"variableOptions\"></a-select>\n      </a-form-item>\n      <a-form-item label=\"json表达式\" :name=\"['extractList',index,'expression']\"  :rules=\"{required: true,message: '表达式必填'}\">\n        <a-input v-model:value=\"item.expression\" placeholder=\"JsonPath表达式\"></a-input>\n      </a-form-item>\n      <a-form-item label=\"新变量名\" :name=\"['extractList',index,'newVariableName']\" :rules=\"{required: true,message: '新变量名必填'}\">\n        <a-input v-model:value=\"item.newVariableName\" placeholder=\"保存结果的变量名\"></a-input>\n      </a-form-item>\n    </a-card>\n  </a-form>\n  <a-row style=\"width: 100%;margin-top: 15px;\">\n    <a-button type=\"dashed\" block style=\"color: #ff6a00;margin-left: 10px;margin-right: 10px\" @click=\"addCondition\"><PlusOutlined/>添加条件</a-button>\n  </a-row>\n  <a-button type=\"primary\" style=\"bottom: 10px;right:25px;position: fixed\" @click=\"saveParams(node)\">保存</a-button>\n</template>\n\n<script>\nimport {reactive, ref, watchEffect} from \"vue\"\nimport {queryVariables, updateNode} from \"@/api/request\";\nimport {useRouter} from \"vue-router/dist/vue-router\";\nimport {useStore} from \"vuex\";\nimport {message} from \"ant-design-vue\";\nconst processInstanceId = ref(0)\nconst author = ref('')\n\n// 提取变量名选择器\nconst useVariableNameEffect = (props)=>{\n  const variableOptions = ref([])\n  const queryVariablesList = async ()=>{\n    await queryVariables(props.versionId,processInstanceId.value).then(res=>{\n      if (res.code===0 && res.data){\n        res.data.forEach(item=>{\n          variableOptions.value.push({\n            value: item,\n            label: item\n          })\n        })\n      }\n    })\n  }\n  watchEffect(()=>{\n    if (props.activeKey == '1') {\n      queryVariablesList()\n    }\n  })\n  return {variableOptions}\n}\n\n// 提取组件\nconst useVariableEffect = (props,ctx)=>{\n  const formRule = ref({})\n  const formExtractParam = reactive({extractList: [{oldVariableName:'',expression:'',newVariableName:''}]})\n  watchEffect(()=>{\n    if(props.activeKey == '1' && props.nodeParams){\n      let jsonParams = props.nodeParams.processInstanceParameter.parameterValue?JSON.parse(props.nodeParams.processInstanceParameter.parameterValue):null\n      formExtractParam.extractList = jsonParams?jsonParams.extractList:[{oldVariableName:'',expression:'',newVariableName:''}]\n    }\n  })\n  const addCondition = ()=>{\n    formExtractParam.extractList.push({oldVariableName:'',expression:'',newVariableName:''})\n  }\n  const removeCondition = (item)=>{\n    let index = formExtractParam.extractList.indexOf(item)\n    if (index !== -1) {\n      formExtractParam.extractList.splice(index, 1);\n    }\n  }\n  const saveParams = async(node)=>{\n    formRule.value.validateFields().then(async ()=>{\n      let req = {\n        \"processNode\": {\n          \"versionId\": props.versionId,\n          \"processInstanceId\": processInstanceId.value,\n          \"uuid\": node.id,\n          \"updatedBy\": author.value\n        },\n        \"processInstanceParameter\": [\n          {\n            \"versionId\": props.versionId,\n            \"parameterType\": \"参数信息\",\n            \"parameterName\": \"params\",\n            \"parameterValue\": JSON.stringify({\n              extractList: formExtractParam.extractList\n            }),\n            \"updatedBy\": author.value\n          }]\n      }\n      await updateNode(req).then(res=>{\n        if(res.code === 0){\n          message.success(\"参数更新成功;\"+\"id:\"+node.id)\n          ctx.emit('close')\n        } else {\n          message.error(\"参数更新失败;\"+res.message)\n        }\n      })\n    }).catch(()=>{\n      message.error('请填写完必填项')\n    })\n  }\n  return {formRule,formExtractParam, addCondition, removeCondition,saveParams}\n}\nexport default {\n  name: \"ExtractParamConfig\",\n  props: ['node','activeKey','nodeParams','versionId'],\n  emits: ['close'],\n  setup(props,ctx){\n    const router = useRouter()\n    const store = useStore()\n    processInstanceId.value = router.currentRoute.value.params.processInstanceId\n    author.value = store.state.user.account\n    const {variableOptions} = useVariableNameEffect(props)\n    const {formRule,formExtractParam,addCondition, removeCondition,saveParams} = useVariableEffect(props,ctx)\n    return {\n      formRule,\n      formExtractParam,\n      variableOptions,\n      addCondition,\n      removeCondition,\n      saveParams\n    }\n  }\n\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}