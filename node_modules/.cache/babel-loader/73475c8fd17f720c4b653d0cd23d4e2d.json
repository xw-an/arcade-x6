{"remainingRequest":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/thread-loader/dist/cjs.js!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/babel-loader/lib/index.js!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/components/param/ToolParamConfig.vue?vue&type=template&id=f1505b06","dependencies":[{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/components/param/ToolParamConfig.vue","mtime":1689428251193},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/babel.config.js","mtime":1667046646049},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/thread-loader/dist/cjs.js","mtime":1689430340741},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/babel-loader/lib/index.js","mtime":1689430342224},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1689430343293},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js","mtime":1689430342169}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIHdpdGhDdHggYXMgX3dpdGhDdHgsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlRWxlbWVudEJsb2NrIGFzIF9jcmVhdGVFbGVtZW50QmxvY2sgfSBmcm9tICJ2dWUiOwpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIGNvbnN0IF9jb21wb25lbnRfYV9idXR0b24gPSBfcmVzb2x2ZUNvbXBvbmVudCgiYS1idXR0b24iKTsKICBjb25zdCBfY29tcG9uZW50X2FfY29sID0gX3Jlc29sdmVDb21wb25lbnQoImEtY29sIik7CiAgY29uc3QgX2NvbXBvbmVudF9hX3JvdyA9IF9yZXNvbHZlQ29tcG9uZW50KCJhLXJvdyIpOwogIGNvbnN0IF9jb21wb25lbnRfYV9zZWxlY3QgPSBfcmVzb2x2ZUNvbXBvbmVudCgiYS1zZWxlY3QiKTsKICBjb25zdCBfY29tcG9uZW50X2FfZm9ybV9pdGVtID0gX3Jlc29sdmVDb21wb25lbnQoImEtZm9ybS1pdGVtIik7CiAgY29uc3QgX2NvbXBvbmVudF9jb2RlbWlycm9yID0gX3Jlc29sdmVDb21wb25lbnQoImNvZGVtaXJyb3IiKTsKICBjb25zdCBfY29tcG9uZW50X2FfaW5wdXQgPSBfcmVzb2x2ZUNvbXBvbmVudCgiYS1pbnB1dCIpOwogIGNvbnN0IF9jb21wb25lbnRfYV9mb3JtID0gX3Jlc29sdmVDb21wb25lbnQoImEtZm9ybSIpOwogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfYV9yb3csIHsKICAgIHN0eWxlOiB7CiAgICAgICJ3aWR0aCI6ICIxMDAlIiwKICAgICAgInRleHQtYWxpZ24iOiAicmlnaHQiLAogICAgICAicGFkZGluZy1ib3R0b20iOiAiNXB4IgogICAgfQogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9hX2NvbCwgewogICAgICBzcGFuOiAyNAogICAgfSwgewogICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfYV9idXR0b24sIHsKICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgIHR5cGU6ICJwcmltYXJ5IiwKICAgICAgICBvbkNsaWNrOiAkc2V0dXAudGVzdFJlcXVlc3QKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVGV4dFZOb2RlKCLmtYvor5Xor7fmsYIiKV0pLAogICAgICAgIF86IDEKICAgICAgfSwgOCwgWyJvbkNsaWNrIl0pXSksCiAgICAgIF86IDEKICAgIH0pXSksCiAgICBfOiAxCiAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2FfZm9ybSwgewogICAgcmVmOiAiZm9ybVJ1bGUiLAogICAgbW9kZWw6ICRzZXR1cC5mb3JtTm9kZVBhcmFtLAogICAgImxhYmVsLWNvbCI6IHsKICAgICAgc3BhbjogMwogICAgfSwKICAgICJ3cmFwcGVyLWNvbCI6IHsKICAgICAgc3BhbjogMjAsCiAgICAgIG9mZnNldDogMQogICAgfSwKICAgIHN0eWxlOiB7CiAgICAgICJtYXJnaW4tdG9wIjogIjVweCIKICAgIH0KICB9LCB7CiAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfYV9mb3JtX2l0ZW0sIHsKICAgICAgbGFiZWw6ICLpg6jpl6giLAogICAgICBuYW1lOiAiZGVwYXJ0bWVudCIsCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+mDqOmXqOW/hemAiScKICAgICAgfQogICAgfSwgewogICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfYV9zZWxlY3QsIHsKICAgICAgICB2YWx1ZTogJHNldHVwLmZvcm1Ob2RlUGFyYW0uZGVwYXJ0bWVudCwKICAgICAgICAib25VcGRhdGU6dmFsdWUiOiBfY2FjaGVbMF0gfHwgKF9jYWNoZVswXSA9ICRldmVudCA9PiAkc2V0dXAuZm9ybU5vZGVQYXJhbS5kZXBhcnRtZW50ID0gJGV2ZW50KSwKICAgICAgICBvcHRpb25zOiAkc2V0dXAuZGVwYXJ0bWVudE9wdGlvbnMKICAgICAgfSwgbnVsbCwgOCwgWyJ2YWx1ZSIsICJvcHRpb25zIl0pXSksCiAgICAgIF86IDEKICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9hX2Zvcm1faXRlbSwgewogICAgICBsYWJlbDogIuW3peWFt+WQjSIsCiAgICAgIG5hbWU6ICJ0b29sSWQiLAogICAgICBydWxlczogewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICflt6Xlhbflv4XpgIknCiAgICAgIH0KICAgIH0sIHsKICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2Ffc2VsZWN0LCB7CiAgICAgICAgdmFsdWU6ICRzZXR1cC5mb3JtTm9kZVBhcmFtLnRvb2xJZCwKICAgICAgICAib25VcGRhdGU6dmFsdWUiOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9ICRldmVudCA9PiAkc2V0dXAuZm9ybU5vZGVQYXJhbS50b29sSWQgPSAkZXZlbnQpLAogICAgICAgIG9wdGlvbnM6ICRzZXR1cC50b29sTmFtZU9wdGlvbnMsCiAgICAgICAgInNob3ctc2VhcmNoIjogIiIsCiAgICAgICAgImFsbG93LWNsZWFyIjogIiIsCiAgICAgICAgZmlsdGVyT3B0aW9uOiAkc2V0dXAuZmlsdGVyT3B0aW9uCiAgICAgIH0sIG51bGwsIDgsIFsidmFsdWUiLCAib3B0aW9ucyIsICJmaWx0ZXJPcHRpb24iXSldKSwKICAgICAgXzogMQogICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2FfZm9ybV9pdGVtLCB7CiAgICAgIGxhYmVsOiAi6K+35rGCanNvbiIsCiAgICAgIG5hbWU6ICJyZXF1ZXN0SnNvbiIsCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ivt+axgmpzb27lv4XloasnCiAgICAgIH0KICAgIH0sIHsKICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2NvZGVtaXJyb3IsIHsKICAgICAgICBtb2RlbFZhbHVlOiAkc2V0dXAuZm9ybU5vZGVQYXJhbS5yZXF1ZXN0SnNvbiwKICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVsyXSB8fCAoX2NhY2hlWzJdID0gJGV2ZW50ID0+ICRzZXR1cC5mb3JtTm9kZVBhcmFtLnJlcXVlc3RKc29uID0gJGV2ZW50KSwKICAgICAgICBzdHlsZTogewogICAgICAgICAgImhlaWdodCI6ICIyNjBweCIsCiAgICAgICAgICAid2lkdGgiOiAiMTAwJSIKICAgICAgICB9LAogICAgICAgIGF1dG9mb2N1czogdHJ1ZSwKICAgICAgICAiaW5kZW50LXdpdGgtdGFiIjogdHJ1ZSwKICAgICAgICB0YWJTaXplOiAyLAogICAgICAgIGV4dGVuc2lvbnM6ICRzZXR1cC5leHRlbnNpb25zUmVxdWVzdAogICAgICB9LCBudWxsLCA4LCBbIm1vZGVsVmFsdWUiLCAiZXh0ZW5zaW9ucyJdKV0pLAogICAgICBfOiAxCiAgICB9KSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfYV9mb3JtX2l0ZW0sIHsKICAgICAgbGFiZWw6ICLov5Tlm55qc29uIgogICAgfSwgewogICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfY29kZW1pcnJvciwgewogICAgICAgIG1vZGVsVmFsdWU6ICRzZXR1cC5mb3JtTm9kZVBhcmFtLnJlc3BvbnNlSnNvbiwKICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVszXSB8fCAoX2NhY2hlWzNdID0gJGV2ZW50ID0+ICRzZXR1cC5mb3JtTm9kZVBhcmFtLnJlc3BvbnNlSnNvbiA9ICRldmVudCksCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICJoZWlnaHQiOiAiMjYwcHgiLAogICAgICAgICAgIndpZHRoIjogIjEwMCUiCiAgICAgICAgfSwKICAgICAgICBhdXRvZm9jdXM6IHRydWUsCiAgICAgICAgImluZGVudC13aXRoLXRhYiI6IHRydWUsCiAgICAgICAgdGFiU2l6ZTogMiwKICAgICAgICBleHRlbnNpb25zOiAkc2V0dXAuZXh0ZW5zaW9uc1Jlc3BvbnNlCiAgICAgIH0sIG51bGwsIDgsIFsibW9kZWxWYWx1ZSIsICJleHRlbnNpb25zIl0pXSksCiAgICAgIF86IDEKICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9hX2Zvcm1faXRlbSwgewogICAgICBsYWJlbDogIuWTjeW6lOWPmOmHj+WQjSIKICAgIH0sIHsKICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2FfaW5wdXQsIHsKICAgICAgICB2YWx1ZTogJHNldHVwLmZvcm1Ob2RlUGFyYW0ucmVzcG9uc2VQYXJhbU5hbWUsCiAgICAgICAgIm9uVXBkYXRlOnZhbHVlIjogX2NhY2hlWzRdIHx8IChfY2FjaGVbNF0gPSAkZXZlbnQgPT4gJHNldHVwLmZvcm1Ob2RlUGFyYW0ucmVzcG9uc2VQYXJhbU5hbWUgPSAkZXZlbnQpCiAgICAgIH0sIG51bGwsIDgsIFsidmFsdWUiXSldKSwKICAgICAgXzogMQogICAgfSldKSwKICAgIF86IDEKICB9LCA4LCBbIm1vZGVsIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9hX2J1dHRvbiwgewogICAgdHlwZTogInByaW1hcnkiLAogICAgc3R5bGU6IHsKICAgICAgImJvdHRvbSI6ICIxMHB4IiwKICAgICAgInJpZ2h0IjogIjI1cHgiLAogICAgICAicG9zaXRpb24iOiAiZml4ZWQiCiAgICB9LAogICAgb25DbGljazogX2NhY2hlWzVdIHx8IChfY2FjaGVbNV0gPSAkZXZlbnQgPT4gJHNldHVwLnNhdmVQYXJhbXMoJHByb3BzLm5vZGUpKQogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVGV4dFZOb2RlKCLkv53lrZgiKV0pLAogICAgXzogMQogIH0pXSwgNjQpOwp9"},{"version":3,"mappings":";;;;;;;;;;6DACEA,aAIQC;IAJDC,KAAyD,EAAzD;MAAA;MAAA;MAAA;IAAA;EAAyD;sBAC9D,MAEQ,CAFRF,aAEQG;MAFAC,IAAI,EAAE;IAAE;wBACd,MAA0E,CAA1EJ,aAA0EK;QAAhEC,IAAI,EAAC,OAAO;QAACC,IAAI,EAAC,SAAS;QAAEC,OAAK,EAAEC;;0BAAa,MAAI,kBAAJ,MAAI;;;;;;MAGnET,aA+BSU;IA/BDC,GAAG,EAAC,UAAU;IAAEC,KAAK,EAAEH,oBAAa;IAAG,WAAS,EAAE;MAAAL;IAAA,CAAW;IAAG,aAAW,EAAE;MAAAA;MAAAS;IAAA,CAAuB;IAAEX,KAAwB,EAAxB;MAAA;IAAA;;sBAC5G,MAEc,CAFdF,aAEcc;MAFDC,KAAK,EAAC,IAAI;MAACC,IAAI,EAAC,YAAY;MAAEC,KAAK,EAAE;QAAAC;QAAAC;MAAA;;wBAChD,MAA2F,CAA3FnB,aAA2FoB;QAAzEC,KAAK,EAAEZ,oBAAa,CAACa,UAAU;8DAAxBb,oBAAa,CAACa,UAAU;QAAGC,OAAO,EAAEd;;;QAE/DT,aAScc;MATDC,KAAK,EAAC,KAAK;MAACC,IAAI,EAAC,QAAQ;MAAEC,KAAK,EAAE;QAAAC;QAAAC;MAAA;;wBAC7C,MAOW,CAPXnB,aAOWoB;QANCC,KAAK,EAAEZ,oBAAa,CAACe,MAAM;8DAApBf,oBAAa,CAACe,MAAM;QAClCD,OAAO,EAAEd,sBAAe;QACzB,aAAW,EAAX,EAAW;QACX,aAAW,EAAX,EAAW;QACVgB,YAAY,EAAEhB;;;QAIrBT,aAMcc;MANDC,KAAK,EAAC,QAAQ;MAACC,IAAI,EAAC,aAAa;MAAEC,KAAK,EAAE;QAAAC;QAAAC;MAAA;;wBACrD,MAI6C,CAJ7CnB,aAI6C0B;oBAJxBjB,oBAAa,CAACkB,WAAW;mEAAzBlB,oBAAa,CAACkB,WAAW;QAAEzB,KAAiC,EAAjC;UAAA;UAAA;QAAA,CAAiC;QACpE0B,SAAS,EAAE,IAAI;QACf,iBAAe,EAAE,IAAI;QACrBC,OAAO,EAAE,CAAC;QACVC,UAAU,EAAErB;;;QAE3BT,aAMcc;MANDC,KAAK,EAAC;IAAQ;wBACzB,MAI8C,CAJ9Cf,aAI8C0B;oBAJzBjB,oBAAa,CAACsB,YAAY;mEAA1BtB,oBAAa,CAACsB,YAAY;QAAE7B,KAAiC,EAAjC;UAAA;UAAA;QAAA,CAAiC;QACrE0B,SAAS,EAAE,IAAI;QACf,iBAAe,EAAE,IAAI;QACrBC,OAAO,EAAE,CAAC;QACVC,UAAU,EAAErB;;;QAE3BT,aAEcc;MAFDC,KAAK,EAAC;IAAO;wBACxB,MAA0D,CAA1Df,aAA0DgC;QAAzCX,KAAK,EAAEZ,oBAAa,CAACwB,iBAAiB;8DAA/BxB,oBAAa,CAACwB,iBAAiB;;;;;oBAG3DjC,aAAgHK;IAAtGE,IAAI,EAAC,SAAS;IAACL,KAA+C,EAA/C;MAAA;MAAA;MAAA;IAAA,CAA+C;IAAEM,OAAK,sCAAEC,iBAAU,CAACyB,WAAI;;sBAAG,MAAE,kBAAF,IAAE","names":["_createVNode","_component_a_row","style","_component_a_col","span","_component_a_button","size","type","onClick","$setup","_component_a_form","ref","model","offset","_component_a_form_item","label","name","rules","required","message","_component_a_select","value","department","options","toolId","filterOption","_component_codemirror","requestJson","autofocus","tabSize","extensions","responseJson","_component_a_input","responseParamName","$props"],"sourceRoot":"","sources":["/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/components/param/ToolParamConfig.vue"],"sourcesContent":["<template>\n  <a-row style=\"width: 100%;text-align: right;padding-bottom: 5px\">\n    <a-col :span=\"24\">\n      <a-button size=\"small\" type=\"primary\" @click=\"testRequest\">测试请求</a-button>\n    </a-col>\n  </a-row>\n  <a-form ref=\"formRule\" :model=\"formNodeParam\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 20,offset: 1  }\" style=\"margin-top: 5px;\">\n    <a-form-item label=\"部门\" name=\"department\" :rules=\"{required: true,message: '部门必选'}\">\n      <a-select v-model:value=\"formNodeParam.department\" :options=\"departmentOptions\"></a-select>\n    </a-form-item>\n    <a-form-item label=\"工具名\" name=\"toolId\" :rules=\"{required: true,message: '工具必选'}\">\n      <a-select\n          v-model:value=\"formNodeParam.toolId\"\n          :options=\"toolNameOptions\"\n          show-search\n          allow-clear\n          :filterOption=\"filterOption\"\n      >\n      </a-select>\n    </a-form-item>\n    <a-form-item label=\"请求json\" name=\"requestJson\" :rules=\"{required: true,message: '请求json必填'}\">\n      <codemirror v-model=\"formNodeParam.requestJson\" style=\"height: 260px;width:100%;\"\n                  :autofocus=\"true\"\n                  :indent-with-tab=\"true\"\n                  :tabSize=\"2\"\n                  :extensions=\"extensionsRequest\"/>\n    </a-form-item>\n    <a-form-item label=\"返回json\">\n      <codemirror v-model=\"formNodeParam.responseJson\" style=\"height: 260px;width:100%;\"\n                  :autofocus=\"true\"\n                  :indent-with-tab=\"true\"\n                  :tabSize=\"2\"\n                  :extensions=\"extensionsResponse\"/>\n    </a-form-item>\n    <a-form-item label=\"响应变量名\">\n      <a-input v-model:value=\"formNodeParam.responseParamName\"/>\n    </a-form-item>\n  </a-form>\n  <a-button type=\"primary\" style=\"bottom: 10px;right:25px;position: fixed\" @click=\"saveParams(node)\">保存</a-button>\n</template>\n\n<script>\n// 参数tab页\nimport {reactive, ref, watchEffect} from \"vue\";\nimport {getToolDetail, getToolNames, runTool, updateNode} from \"@/api/request\";\nimport {message} from \"ant-design-vue\";\nimport {json} from \"@codemirror/lang-json\";\nimport {Codemirror} from \"vue-codemirror/dist/vue-codemirror.esm\";\nimport {useStore} from \"vuex\";\nimport {useRouter} from \"vue-router/dist/vue-router\";\nconst processInstanceId = ref(0)\nconst author = ref('')\n\nconst useParamsPanelEffect = (props,ctx)=>{\n  const formRule = ref({})\n  const formNodeParam = reactive({\n    department: null,\n    toolId: null,\n    requestJson: null,\n    responseParamName: null,\n    responseJson: null\n  })\n  const departmentOptions = [\n    {value:'MiddlewareTool',label:'中间件'},\n    {value:'FontTool',label:'前台'},\n    {value:'MiddleTool',label:'中台'},\n    {value:'UserTool',label:'用户'},\n    {value:'UtilTool',label:'公共'}\n  ]\n  const toolNameOptions = ref([])\n  const getNames = async ()=>{\n    let req = {\n      department: formNodeParam.department\n    }\n    await getToolNames(req).then(res=>{\n      if(res.code === 0 && res.data){\n        toolNameOptions.value = res.data.map(item=>{\n          return {\n            value: item.id,\n            label: item.toolName.trim()\n          }\n        })\n      }\n    })\n  }\n  const filterOption = (input, option) => {\n    return option.label.toLowerCase().indexOf(input.toLowerCase()) >= 0\n    // return option.value.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n  }\n  const getRequestJson = async ()=>{\n    let req = {toolId: formNodeParam.toolId}\n    getToolDetail(req).then(res=>{\n      if(res.code === 0 && res.data?.testToolDetail) {\n        let obj = JSON.parse(res.data?.testToolDetail?.requestParam)\n        let requestJson = {}\n        obj.forEach(item=>{\n          requestJson[item.name] = item?.defaultValue\n        })\n        formNodeParam.requestJson = JSON.stringify(requestJson,null,'\\t')\n      }else{\n        message.error(res.message)\n      }\n    })\n  }\n  const extensionsRequest = [json()]\n  const extensionsResponse = [json()]\n  // 测试请求，获取结果\n  const testRequest = async()=>{\n    // 先判断一下入参报文不为空在调用接口\n    if (formNodeParam.requestJson && formNodeParam.toolId){\n      // 调后端接口运行工具\n      let req = {\n        toolId: formNodeParam.toolId,\n        requestParam: formNodeParam.requestJson.toString().replaceAll('\\t','').replaceAll('\\n',''),\n        operator: \"amy.xue\" // todo 当前登录用户\n      }\n      await runTool(req).then(res=>{\n        if (res.code === 0) {\n          formNodeParam.responseJson = JSON.stringify(res.data.responseParam,null, '\\t')\n        } else {\n          message.error('工具执行失败：'+res.message)\n        }\n      })\n    }\n  }\n  const saveParams = async(node)=>{\n    formRule.value.validateFields().then(async ()=>{\n      let req = {\n        \"processNode\": {\n          \"versionId\": props.versionId,\n          \"processInstanceId\": processInstanceId.value,\n          \"uuid\": node.id,\n          \"updatedBy\": author.value\n        },\n        \"processInstanceParameter\": [\n          {\n            \"versionId\": props.versionId,\n            \"parameterType\": \"参数信息\",\n            \"parameterName\": \"params\",\n            \"parameterValue\": JSON.stringify({\n              department: formNodeParam?.department,\n              toolId: formNodeParam?.toolId,\n              requestJson: formNodeParam?.requestJson.toString().replaceAll('\\t','').replaceAll('\\n',''),\n              responseParamName: formNodeParam?.responseParamName,\n            }),\n            \"updatedBy\": author.value\n          }]\n      }\n      await updateNode(req).then(res=>{\n        if(res.code === 0){\n          message.success(\"参数更新成功;\"+\"id:\"+node.id)\n          ctx.emit('close')\n        } else {\n          message.error(\"参数更新失败：\"+res.message)\n        }\n      })\n    }).catch(() => {\n      // console.log(error)\n      message.error('请填写完必填项')\n    })\n  }\n  watchEffect(()=>{\n    if(props.activeKey == '1' && props.nodeParams){\n      let jsonParams = props.nodeParams.processInstanceParameter?.parameterValue?JSON.parse(props.nodeParams.processInstanceParameter.parameterValue):null\n      formNodeParam.department = jsonParams?jsonParams?.department:null\n      formNodeParam.toolId = jsonParams?jsonParams?.toolId:null\n      formNodeParam.requestJson = jsonParams?JSON.stringify(JSON.parse(jsonParams?.requestJson),null, '\\t'):null\n      formNodeParam.responseParamName = jsonParams?jsonParams?.responseParamName:null\n      formNodeParam.responseJson = null\n    }\n  })\n  watchEffect(()=>{\n    if (props.activeKey == '1' && formNodeParam.department) {\n      getNames()\n    }\n    if (props.activeKey == '1' && formNodeParam.toolId) {\n      getRequestJson()\n    }\n  })\n  return {\n    formRule,\n    formNodeParam,\n    departmentOptions,\n    toolNameOptions,\n    extensionsRequest,\n    extensionsResponse,\n    filterOption,\n    saveParams,\n    testRequest\n  }\n}\nexport default {\n  name: \"ToolParamConfig\",\n  props: ['node','activeKey','nodeParams','versionId'],\n  emits: ['close'],\n  components: {Codemirror},\n  setup(props,ctx){\n    const router = useRouter()\n    const store = useStore()\n    processInstanceId.value = router.currentRoute.value.params.processInstanceId\n    author.value = store.state.user.account\n    const {formRule,formNodeParam, departmentOptions, toolNameOptions, extensionsRequest,filterOption,saveParams,extensionsResponse,testRequest} = useParamsPanelEffect(props,ctx)\n    return {formRule,formNodeParam, departmentOptions, toolNameOptions, extensionsRequest,filterOption,saveParams,extensionsResponse,testRequest}\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}