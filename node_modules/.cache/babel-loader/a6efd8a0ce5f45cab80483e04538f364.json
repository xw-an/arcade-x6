{"remainingRequest":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/thread-loader/dist/cjs.js!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/babel-loader/lib/index.js!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/FlowAddModal.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/FlowAddModal.vue","mtime":1689426286288},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/babel.config.js","mtime":1667046646049},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/thread-loader/dist/cjs.js","mtime":1689430340741},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/babel-loader/lib/index.js","mtime":1689430342224},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js","mtime":1689430342169}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVhY3RpdmUsIHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IG1lc3NhZ2UgfSBmcm9tICJhbnQtZGVzaWduLXZ1ZSI7CmltcG9ydCB7IGNyZWF0ZUZsb3cgfSBmcm9tICJAL2FwaS9yZXF1ZXN0IjsKY29uc3QgdXNlRm9ybVN0YXRlID0gKHByb3BzLCBjdHgpID0+IHsKICBjb25zdCBmb3JtUnVsZSA9IHJlZigpOwogIGNvbnN0IGZvcm1TdGF0ZSA9IHJlYWN0aXZlKHsKICAgIG5hbWU6ICcnLAogICAgZGVzY3JpcHRpb246ICcnLAogICAgYnVzaW5lc3NMaW5lOiAnJywKICAgIHR5cGU6ICcnCiAgICAvLyB2ZXJzaW9uOiAxCiAgfSk7CgogIGNvbnN0IGJ1c2luZXNzTGluZXMgPSBbewogICAgbGFiZWw6ICfkuJrliqHnur8xJywKICAgIHZhbHVlOiAn5Lia5Yqh57q/MScKICB9LCB7CiAgICBsYWJlbDogJ+S4muWKoee6vzInLAogICAgdmFsdWU6ICfkuJrliqHnur8yJwogIH0sIHsKICAgIGxhYmVsOiAn5Lia5Yqh57q/MycsCiAgICB2YWx1ZTogJ+S4muWKoee6vzMnCiAgfV07CiAgY29uc3QgdHlwZXMgPSBbewogICAgbGFiZWw6ICflt6Xlhbfnu4Tku7YnLAogICAgdmFsdWU6ICd0b29sJwogIH0sIHsKICAgIGxhYmVsOiAn5rWB56iL57uE5Lu2JywKICAgIHZhbHVlOiAnZmxvdycKICB9LCB7CiAgICBsYWJlbDogJ+iHquWKqOWMlue7hOS7ticsCiAgICB2YWx1ZTogJ2F1dG90ZXN0JwogIH1dOwogIGNvbnN0IGhhbmRsZU9rID0gdXNlckFjY291bnQgPT4gewogICAgZm9ybVJ1bGUudmFsdWUudmFsaWRhdGVGaWVsZHMoKS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgbGV0IHJlcSA9IHsKICAgICAgICBuYW1lOiBmb3JtU3RhdGUubmFtZSwKICAgICAgICBkZXNjcmlwdGlvbjogZm9ybVN0YXRlLmRlc2NyaXB0aW9uLAogICAgICAgIGJ1c2luZXNzTGluZTogZm9ybVN0YXRlLmJ1c2luZXNzTGluZSwKICAgICAgICB0eXBlOiBmb3JtU3RhdGUudHlwZSwKICAgICAgICAvLyB2ZXJzaW9uOiBmb3JtU3RhdGUudmVyc2lvbiwKICAgICAgICBzdGF0dXM6IDAsCiAgICAgICAgY3JlYXRlZEJ5OiB1c2VyQWNjb3VudCwKICAgICAgICB1cGRhdGVkQnk6IHVzZXJBY2NvdW50CiAgICAgIH07CiAgICAgIC8v6LCD5ZCO56uv5o6l5Y+j5re75YqgCiAgICAgIGF3YWl0IGNyZWF0ZUZsb3cocmVxKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKChyZXMgPT09IG51bGwgfHwgcmVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXMuY29kZSkgPT09IDAgJiYgcmVzLmRhdGEgPiAwKSB7CiAgICAgICAgICBmb3JtUnVsZS52YWx1ZS5yZXNldEZpZWxkcygpOwogICAgICAgICAgbWVzc2FnZS5zdWNjZXNzKCfmt7vliqDmiJDlip8nKTsKICAgICAgICAgIGN0eC5lbWl0KCdjb25maXJtJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1lc3NhZ2UuZXJyb3IoJ+a3u+WKoOWksei0pe+8micgKyAocmVzID09PSBudWxsIHx8IHJlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzLm1lc3NhZ2UpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAvLyBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgbWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5a6M5b+F5aGr6aG5Jyk7CiAgICB9KTsKICB9OwogIGNvbnN0IGhhbmRsZUNhbmNlbCA9ICgpID0+IHsKICAgIGZvcm1SdWxlLnZhbHVlLnJlc2V0RmllbGRzKCk7CiAgICBjdHguZW1pdCgnY2xvc2UnKTsKICB9OwogIHJldHVybiB7CiAgICBmb3JtU3RhdGUsCiAgICBmb3JtUnVsZSwKICAgIGJ1c2luZXNzTGluZXMsCiAgICB0eXBlcywKICAgIGhhbmRsZU9rLAogICAgaGFuZGxlQ2FuY2VsCiAgfTsKfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJGbG93QWRkTW9kYWwiLAogIHByb3BzOiBbJ3Zpc2libGUnXSwKICBlbWl0czogWydjbG9zZScsICdjb25maXJtJ10sCiAgc2V0dXAocHJvcHMsIGN0eCkgewogICAgY29uc3QgewogICAgICBmb3JtU3RhdGUsCiAgICAgIGZvcm1SdWxlLAogICAgICBidXNpbmVzc0xpbmVzLAogICAgICB0eXBlcywKICAgICAgaGFuZGxlT2ssCiAgICAgIGhhbmRsZUNhbmNlbAogICAgfSA9IHVzZUZvcm1TdGF0ZShwcm9wcywgY3R4KTsKICAgIHJldHVybiB7CiAgICAgIGZvcm1TdGF0ZSwKICAgICAgZm9ybVJ1bGUsCiAgICAgIGJ1c2luZXNzTGluZXMsCiAgICAgIHR5cGVzLAogICAgICBoYW5kbGVPaywKICAgICAgaGFuZGxlQ2FuY2VsCiAgICB9OwogIH0KfTs="},{"version":3,"mappings":"AA8BA,SAASA,QAAQ,EAACC,GAAG,QAAO,KAAI;AAChC,SAAQC,OAAO,QAAO,gBAAgB;AACtC,SAAQC,UAAU,QAAO,eAAe;AACxC,MAAMC,YAAW,GAAI,CAACC,KAAK,EAACC,GAAG,KAAG;EAChC,MAAMC,QAAO,GAAIN,GAAG,EAAC;EACrB,MAAMO,SAAQ,GAAIR,QAAQ,CAAC;IACzBS,IAAI,EAAE,EAAE;IACRC,WAAW,EAAE,EAAE;IACfC,YAAY,EAAE,EAAE;IAChBC,IAAI,EAAE;IACN;EACF,CAAC;;EACD,MAAMC,aAAY,GAAI,CACpB;IAACC,KAAK,EAAE,MAAM;IAAEC,KAAK,EAAE;EAAM,CAAC,EAC9B;IAACD,KAAK,EAAE,MAAM;IAAEC,KAAK,EAAE;EAAM,CAAC,EAC9B;IAACD,KAAK,EAAE,MAAM;IAAEC,KAAK,EAAE;EAAM,EAC/B;EACA,MAAMC,KAAI,GAAI,CACZ;IAACF,KAAK,EAAE,MAAM;IAAEC,KAAK,EAAE;EAAM,CAAC,EAC9B;IAACD,KAAK,EAAE,MAAM;IAAEC,KAAK,EAAE;EAAM,CAAC,EAC9B;IAACD,KAAK,EAAE,OAAO;IAAEC,KAAK,EAAE;EAAU,EACpC;EACA,MAAME,QAAO,GAAKC,WAAW,IAAK;IAChCX,QAAQ,CAACQ,KAAK,CAACI,cAAc,EAAE,CAACC,IAAI,CAAC,YAAU;MAC7C,IAAIC,GAAE,GAAI;QACRZ,IAAI,EAAED,SAAS,CAACC,IAAI;QACpBC,WAAW,EAAEF,SAAS,CAACE,WAAW;QAClCC,YAAY,EAAEH,SAAS,CAACG,YAAY;QACpCC,IAAI,EAAEJ,SAAS,CAACI,IAAI;QACpB;QACAU,MAAM,EAAE,CAAC;QACTC,SAAS,EAAEL,WAAW;QACtBM,SAAS,EAAEN;MACb;MACA;MACA,MAAMf,UAAU,CAACkB,GAAG,CAAC,CAACD,IAAI,CAACK,GAAG,IAAE;QAC9B,IAAI,IAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEC,IAAG,MAAM,KAAKD,GAAG,CAACE,IAAI,GAAC,CAAC,EAAE;UACjCpB,QAAQ,CAACQ,KAAK,CAACa,WAAW,EAAC;UAC3B1B,OAAO,CAAC2B,OAAO,CAAC,MAAM;UACtBvB,GAAG,CAACwB,IAAI,CAAC,SAAS;QACpB,OAAO;UACL5B,OAAO,CAAC6B,KAAK,CAAC,OAAO,IAACN,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEvB,OAAO;QACpC;MACF,CAAC;IACH,CAAC,CAAC,CAAC8B,KAAK,CAAC,MAAM;MACb;MACA9B,OAAO,CAAC6B,KAAK,CAAC,SAAS;IACzB,CAAC;EACH;EACA,MAAME,YAAW,GAAI,MAAM;IACzB1B,QAAQ,CAACQ,KAAK,CAACa,WAAW,EAAC;IAC3BtB,GAAG,CAACwB,IAAI,CAAC,OAAO;EAClB;EACA,OAAO;IACLtB,SAAS;IACTD,QAAQ;IACRM,aAAa;IACbG,KAAK;IACLC,QAAQ;IACRgB;EACF;AACF;AAEA,eAAe;EACbxB,IAAI,EAAE,cAAc;EACpBJ,KAAK,EAAC,CAAC,SAAS,CAAC;EACjB6B,KAAK,EAAC,CAAC,OAAO,EAAC,SAAS,CAAC;EACzBC,KAAK,CAAC9B,KAAK,EAACC,GAAG,EAAE;IACf,MAAM;MAACE,SAAS;MAACD,QAAQ;MAACM,aAAa;MAACG,KAAK;MAACC,QAAQ;MAACgB;IAAY,IAAI7B,YAAY,CAACC,KAAK,EAACC,GAAG;IAC7F,OAAO;MACLE,SAAS;MACTD,QAAQ;MACRM,aAAa;MACbG,KAAK;MACLC,QAAQ;MACRgB;IACF;EACF;AACF","names":["reactive","ref","message","createFlow","useFormState","props","ctx","formRule","formState","name","description","businessLine","type","businessLines","label","value","types","handleOk","userAccount","validateFields","then","req","status","createdBy","updatedBy","res","code","data","resetFields","success","emit","error","catch","handleCancel","emits","setup"],"sourceRoot":"","sources":["/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/FlowAddModal.vue"],"sourcesContent":["<template>\n  <a-modal :visible=\"visible\"\n           title=\"新建流程\"\n           okText=\"提交\"\n           cancelText=\"取消\"\n           @ok=\"handleOk($store.state.user.account)\"\n           @cancel=\"handleCancel\"\n           width=\"680px\"\n  >\n    <a-form :model=\"formState\" ref=\"formRule\" :label-col=\"{ span: 4 }\" :wrapper-col=\"{ span: 18 ,offset: 1}\">\n      <a-form-item label=\"流程名称\" name=\"name\" :rules=\"[{ required: true, message: '流程名称必填项'}]\">\n        <a-input show-count :maxlength=\"50\" allow-clear v-model:value=\"formState.name\" placeholder=\"请输入流程名称\"/>\n      </a-form-item>\n      <a-form-item label=\"流程描述\" name=\"description\">\n        <a-textarea show-count :maxlength=\"100\" :rows=\"4\" v-model:value=\"formState.description\" placeholder=\"请输入描述信息\"/>\n      </a-form-item>\n      <a-form-item label=\"业务线\" name=\"businessLine\" :rules=\"[{ required: true, message: '业务线必填项'}]\">\n        <a-select v-model:value=\"formState.businessLine\" :options=\"businessLines\" placeholder=\"请选择业务线\"></a-select>\n      </a-form-item>\n      <a-form-item label=\"所属类型\" name=\"type\" :rules=\"[{ required: true, message: '所属类型必填项'}]\">\n        <a-select v-model:value=\"formState.type\" :options=\"types\" placeholder=\"请选择流程类型\"></a-select>\n      </a-form-item>\n<!--      <a-form-item label=\"版本号\" name=\"version\">-->\n<!--        <a-input v-model:value=\"formState.version\"/>-->\n<!--      </a-form-item>-->\n    </a-form>\n  </a-modal>\n</template>\n\n<script>\nimport { reactive,ref} from 'vue'\nimport {message} from \"ant-design-vue\";\nimport {createFlow} from \"@/api/request\";\nconst useFormState = (props,ctx)=>{\n  const formRule = ref()\n  const formState = reactive({\n    name: '',\n    description: '',\n    businessLine: '',\n    type: '',\n    // version: 1\n  })\n  const businessLines = [\n    {label: '业务线1', value: '业务线1'},\n    {label: '业务线2', value: '业务线2'},\n    {label: '业务线3', value: '业务线3'}\n  ]\n  const types = [\n    {label: '工具组件', value: 'tool'},\n    {label: '流程组件', value: 'flow'},\n    {label: '自动化组件', value: 'autotest'}\n  ]\n  const handleOk = (userAccount) => {\n    formRule.value.validateFields().then(async ()=>{\n      let req = {\n        name: formState.name,\n        description: formState.description,\n        businessLine: formState.businessLine,\n        type: formState.type,\n        // version: formState.version,\n        status: 0,\n        createdBy: userAccount,\n        updatedBy: userAccount\n      }\n      //调后端接口添加\n      await createFlow(req).then(res=>{\n        if (res?.code === 0 && res.data>0) {\n          formRule.value.resetFields()\n          message.success('添加成功')\n          ctx.emit('confirm')\n        } else {\n          message.error('添加失败：'+res?.message)\n        }\n      })\n    }).catch(() => {\n      // console.log(error)\n      message.error('请填写完必填项')\n    })\n  }\n  const handleCancel = () => {\n    formRule.value.resetFields()\n    ctx.emit('close')\n  }\n  return {\n    formState,\n    formRule,\n    businessLines,\n    types,\n    handleOk,\n    handleCancel\n  }\n}\n\nexport default {\n  name: \"FlowAddModal\",\n  props:['visible'],\n  emits:['close','confirm'],\n  setup(props,ctx) {\n    const {formState,formRule,businessLines,types,handleOk,handleCancel} = useFormState(props,ctx)\n    return {\n      formState,\n      formRule,\n      businessLines,\n      types,\n      handleOk,\n      handleCancel\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}