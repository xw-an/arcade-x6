{"remainingRequest":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/babel-loader/lib/index.js!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/FlowEditModal.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/FlowEditModal.vue","mtime":1689426069349},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/babel-loader/lib/index.js","mtime":1689430342224},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js","mtime":1689430342169},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/babel.config.js","mtime":1667046646049},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/babel-loader/lib/index.js","mtime":1689430342224},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js","mtime":1689430342169}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVhY3RpdmUsIHJlZiwgd2F0Y2hFZmZlY3QgfSBmcm9tICd2dWUnOwppbXBvcnQgeyBtZXNzYWdlIH0gZnJvbSAiYW50LWRlc2lnbi12dWUiOwppbXBvcnQgeyBlZGl0RmxvdyB9IGZyb20gIkAvYXBpL3JlcXVlc3QiOwpjb25zdCB1c2VGb3JtU3RhdGUgPSAocHJvcHMsIGN0eCkgPT4gewogIGNvbnN0IGZvcm1SdWxlID0gcmVmKCk7CiAgbGV0IGZvcm1TdGF0ZSA9IHJlYWN0aXZlKHsKICAgIGlkOiAwLAogICAgbmFtZTogJycsCiAgICBkZXNjcmlwdGlvbjogJycsCiAgICBidXNpbmVzc0xpbmU6ICcnLAogICAgdHlwZTogJycKICAgIC8vIHZlcnNpb246ICcnCiAgfSk7CgogIGNvbnN0IGJ1c2luZXNzTGluZXMgPSBbewogICAgbGFiZWw6ICfkuJrliqHnur8xJywKICAgIHZhbHVlOiAn5Lia5Yqh57q/MScKICB9LCB7CiAgICBsYWJlbDogJ+S4muWKoee6vzInLAogICAgdmFsdWU6ICfkuJrliqHnur8yJwogIH0sIHsKICAgIGxhYmVsOiAn5Lia5Yqh57q/MycsCiAgICB2YWx1ZTogJ+S4muWKoee6vzMnCiAgfV07CiAgY29uc3QgdHlwZXMgPSBbewogICAgbGFiZWw6ICflt6Xlhbfnu4Tku7YnLAogICAgdmFsdWU6ICd0b29sJwogIH0sIHsKICAgIGxhYmVsOiAn5rWB56iL57uE5Lu2JywKICAgIHZhbHVlOiAnZmxvdycKICB9LCB7CiAgICBsYWJlbDogJ+iHquWKqOWMlue7hOS7ticsCiAgICB2YWx1ZTogJ2F1dG90ZXN0JwogIH1dOwogIGNvbnN0IGhhbmRsZU9rID0gdXNlckFjY291bnQgPT4gewogICAgZm9ybVJ1bGUudmFsdWUudmFsaWRhdGVGaWVsZHMoKS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgbGV0IHJlcSA9IHsKICAgICAgICBpZDogZm9ybVN0YXRlLmlkLAogICAgICAgIG5hbWU6IGZvcm1TdGF0ZS5uYW1lLAogICAgICAgIGRlc2NyaXB0aW9uOiBmb3JtU3RhdGUuZGVzY3JpcHRpb24sCiAgICAgICAgYnVzaW5lc3NMaW5lOiBmb3JtU3RhdGUuYnVzaW5lc3NMaW5lLAogICAgICAgIHR5cGU6IGZvcm1TdGF0ZS50eXBlLAogICAgICAgIC8vIHZlcnNpb246IGZvcm1TdGF0ZS52ZXJzaW9uLAogICAgICAgIC8vIHN0YXR1czogMCwgLy8g5pu05paw5LiN5L+u5pS554q25oCB5YC8CiAgICAgICAgLy8gY3JlYXRlZEJ5OiB1c2VyQWNjb3VudCwgLy8g5pu05paw5LiN5L+u5pS55Yib5bu65Lq6CiAgICAgICAgdXBkYXRlZEJ5OiB1c2VyQWNjb3VudAogICAgICB9OwogICAgICAvL+iwg+WQjuerr+aOpeWPo+a3u+WKoAogICAgICBhd2FpdCBlZGl0RmxvdyhyZXEpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAoKHJlcyA9PT0gbnVsbCB8fCByZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcy5jb2RlKSA9PT0gMCkgewogICAgICAgICAgZm9ybVJ1bGUudmFsdWUucmVzZXRGaWVsZHMoKTsKICAgICAgICAgIG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5YqfJyk7CiAgICAgICAgICBjdHguZW1pdCgnY29uZmlybScpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBtZXNzYWdlLmVycm9yKCfmt7vliqDlpLHotKXvvJonICsgKHJlcyA9PT0gbnVsbCB8fCByZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcy5tc2cpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAvLyBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgbWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5a6M5b+F5aGr6aG5Jyk7CiAgICB9KTsKICB9OwogIGNvbnN0IGhhbmRsZUNhbmNlbCA9ICgpID0+IHsKICAgIGZvcm1SdWxlLnZhbHVlLnJlc2V0RmllbGRzKCk7CiAgICBjdHguZW1pdCgnY2xvc2UnKTsKICB9OwogIHJldHVybiB7CiAgICBmb3JtU3RhdGUsCiAgICBmb3JtUnVsZSwKICAgIGJ1c2luZXNzTGluZXMsCiAgICB0eXBlcywKICAgIGhhbmRsZU9rLAogICAgaGFuZGxlQ2FuY2VsCiAgfTsKfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJGbG93RWRpdE1vZGFsIiwKICBwcm9wczogWyd2aXNpYmxlJywgJ2RhdGEnXSwKICBlbWl0czogWydjbG9zZScsICdjb25maXJtJ10sCiAgc2V0dXAocHJvcHMsIGN0eCkgewogICAgbGV0IHsKICAgICAgZm9ybVN0YXRlLAogICAgICBmb3JtUnVsZSwKICAgICAgYnVzaW5lc3NMaW5lcywKICAgICAgdHlwZXMsCiAgICAgIGhhbmRsZU9rLAogICAgICBoYW5kbGVDYW5jZWwKICAgIH0gPSB1c2VGb3JtU3RhdGUocHJvcHMsIGN0eCk7CiAgICB3YXRjaEVmZmVjdCgoKSA9PiB7CiAgICAgIGlmIChwcm9wcy52aXNpYmxlKSB7CiAgICAgICAgdmFyIF9wcm9wcyRkYXRhLCBfcHJvcHMkZGF0YTIsIF9wcm9wcyRkYXRhMywgX3Byb3BzJGRhdGE0LCBfcHJvcHMkZGF0YTU7CiAgICAgICAgZm9ybVN0YXRlLmlkID0gcHJvcHMgPT09IG51bGwgfHwgcHJvcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcHJvcHMkZGF0YSA9IHByb3BzLmRhdGEpID09PSBudWxsIHx8IF9wcm9wcyRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJvcHMkZGF0YS5pZDsKICAgICAgICBmb3JtU3RhdGUubmFtZSA9IHByb3BzID09PSBudWxsIHx8IHByb3BzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3Byb3BzJGRhdGEyID0gcHJvcHMuZGF0YSkgPT09IG51bGwgfHwgX3Byb3BzJGRhdGEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJvcHMkZGF0YTIubmFtZTsKICAgICAgICBmb3JtU3RhdGUuZGVzY3JpcHRpb24gPSBwcm9wcyA9PT0gbnVsbCB8fCBwcm9wcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wcm9wcyRkYXRhMyA9IHByb3BzLmRhdGEpID09PSBudWxsIHx8IF9wcm9wcyRkYXRhMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJGRhdGEzLmRlc2NyaXB0aW9uOwogICAgICAgIGZvcm1TdGF0ZS5idXNpbmVzc0xpbmUgPSBwcm9wcyA9PT0gbnVsbCB8fCBwcm9wcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wcm9wcyRkYXRhNCA9IHByb3BzLmRhdGEpID09PSBudWxsIHx8IF9wcm9wcyRkYXRhNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJGRhdGE0LmJ1c2luZXNzTGluZTsKICAgICAgICBmb3JtU3RhdGUudHlwZSA9IHByb3BzID09PSBudWxsIHx8IHByb3BzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3Byb3BzJGRhdGE1ID0gcHJvcHMuZGF0YSkgPT09IG51bGwgfHwgX3Byb3BzJGRhdGE1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJvcHMkZGF0YTUudHlwZTsKICAgICAgICAvLyBmb3JtU3RhdGUudmVyc2lvbiAgPSBwcm9wcz8uZGF0YT8udmVyc2lvbgogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gewogICAgICBmb3JtU3RhdGUsCiAgICAgIGZvcm1SdWxlLAogICAgICBidXNpbmVzc0xpbmVzLAogICAgICB0eXBlcywKICAgICAgaGFuZGxlT2ssCiAgICAgIGhhbmRsZUNhbmNlbAogICAgfTsKICB9Cn07"},{"version":3,"mappings":"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","names":["reactive","ref","watchEffect","message","editFlow","useFormState","props","ctx","formRule","formState","id","name","description","businessLine","type","businessLines","label","value","types","handleOk","userAccount","validateFields","then","req","updatedBy","res","code","resetFields","success","emit","error","msg","catch","handleCancel","emits","setup","visible","data"],"sourceRoot":"","sources":["/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/FlowEditModal.vue"],"sourcesContent":["<template>\n  <a-modal :visible=\"visible\"\n           title=\"编辑流程\"\n           okText=\"提交\"\n           cancelText=\"取消\"\n           @ok=\"handleOk($store.state.user.account)\"\n           @cancel=\"handleCancel\"\n           width=\"680px\"\n  >\n    <a-form :model=\"formState\" ref=\"formRule\" :label-col=\"{ span: 4 }\" :wrapper-col=\"{ span: 18 ,offset: 1}\">\n      <a-form-item label=\"流程名称\" name=\"name\" :rules=\"[{ required: true, message: '流程名称必填项'}]\">\n        <a-input show-count :maxlength=\"50\" allow-clear v-model:value=\"formState.name\" placeholder=\"请输入流程名称\"/>\n      </a-form-item>\n      <a-form-item label=\"流程描述\" name=\"description\">\n        <a-textarea show-count :maxlength=\"100\" :rows=\"4\" v-model:value=\"formState.description\" placeholder=\"请输入描述信息\"/>\n      </a-form-item>\n      <a-form-item label=\"业务线\" name=\"businessLine\" :rules=\"[{ required: true, message: '业务线必填项'}]\">\n        <a-select v-model:value=\"formState.businessLine\" :options=\"businessLines\" placeholder=\"请选择业务线\"></a-select>\n      </a-form-item>\n      <a-form-item label=\"所属类型\" name=\"type\" :rules=\"[{ required: true, message: '所属类型必填项'}]\">\n        <a-select v-model:value=\"formState.type\" :options=\"types\" placeholder=\"请选择流程类型\"></a-select>\n      </a-form-item>\n<!--      <a-form-item label=\"版本号\" name=\"version\">-->\n<!--        <a-input v-model:value=\"formState.version\"/>-->\n<!--      </a-form-item>-->\n    </a-form>\n  </a-modal>\n</template>\n\n<script>\nimport {reactive, ref, watchEffect} from 'vue'\nimport {message} from \"ant-design-vue\";\nimport {editFlow} from \"@/api/request\";\nconst useFormState = (props,ctx)=>{\n  const formRule = ref()\n  let formState = reactive({\n    id: 0,\n    name: '',\n    description: '',\n    businessLine: '',\n    type: '',\n    // version: ''\n  })\n  const businessLines = [\n    {label: '业务线1', value: '业务线1'},\n    {label: '业务线2', value: '业务线2'},\n    {label: '业务线3', value: '业务线3'}\n  ]\n  const types = [\n    {label: '工具组件', value: 'tool'},\n    {label: '流程组件', value: 'flow'},\n    {label: '自动化组件', value: 'autotest'}\n  ]\n  const handleOk = (userAccount) => {\n    formRule.value.validateFields().then(async ()=>{\n      let req = {\n        id: formState.id,\n        name: formState.name,\n        description: formState.description,\n        businessLine: formState.businessLine,\n        type: formState.type,\n        // version: formState.version,\n        // status: 0, // 更新不修改状态值\n        // createdBy: userAccount, // 更新不修改创建人\n        updatedBy: userAccount\n      }\n      //调后端接口添加\n      await editFlow(req).then(res=>{\n        if (res?.code === 0) {\n          formRule.value.resetFields()\n          message.success('修改成功')\n          ctx.emit('confirm')\n        } else {\n          message.error('添加失败：'+res?.msg)\n        }\n      })\n    }).catch(() => {\n      // console.log(error)\n      message.error('请填写完必填项')\n    })\n  }\n  const handleCancel = () => {\n    formRule.value.resetFields()\n    ctx.emit('close')\n  }\n  return {\n    formState,\n    formRule,\n    businessLines,\n    types,\n    handleOk,\n    handleCancel\n  }\n}\n\nexport default {\n  name: \"FlowEditModal\",\n  props:['visible','data'],\n  emits:['close','confirm'],\n  setup(props,ctx) {\n    let {formState,formRule,businessLines,types,handleOk,handleCancel} = useFormState(props,ctx)\n    watchEffect(()=>{\n      if(props.visible) {\n        formState.id  = props?.data?.id\n        formState.name  = props?.data?.name\n        formState.description  = props?.data?.description\n        formState.businessLine  = props?.data?.businessLine\n        formState.type  = props?.data?.type\n        // formState.version  = props?.data?.version\n      }\n    })\n    return {\n      formState,\n      formRule,\n      businessLines,\n      types,\n      handleOk,\n      handleCancel\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}