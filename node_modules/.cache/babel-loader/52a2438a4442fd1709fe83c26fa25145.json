{"remainingRequest":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/thread-loader/dist/cjs.js!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/babel-loader/lib/index.js!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/FlowEditModal.vue?vue&type=template&id=5ee3e530","dependencies":[{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/FlowEditModal.vue","mtime":1689426069349},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/babel.config.js","mtime":1667046646049},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/thread-loader/dist/cjs.js","mtime":1689430340741},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/babel-loader/lib/index.js","mtime":1689430342224},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1689430343293},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js","mtime":1689430342169}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrIH0gZnJvbSAidnVlIjsKZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICBjb25zdCBfY29tcG9uZW50X2FfaW5wdXQgPSBfcmVzb2x2ZUNvbXBvbmVudCgiYS1pbnB1dCIpOwogIGNvbnN0IF9jb21wb25lbnRfYV9mb3JtX2l0ZW0gPSBfcmVzb2x2ZUNvbXBvbmVudCgiYS1mb3JtLWl0ZW0iKTsKICBjb25zdCBfY29tcG9uZW50X2FfdGV4dGFyZWEgPSBfcmVzb2x2ZUNvbXBvbmVudCgiYS10ZXh0YXJlYSIpOwogIGNvbnN0IF9jb21wb25lbnRfYV9zZWxlY3QgPSBfcmVzb2x2ZUNvbXBvbmVudCgiYS1zZWxlY3QiKTsKICBjb25zdCBfY29tcG9uZW50X2FfZm9ybSA9IF9yZXNvbHZlQ29tcG9uZW50KCJhLWZvcm0iKTsKICBjb25zdCBfY29tcG9uZW50X2FfbW9kYWwgPSBfcmVzb2x2ZUNvbXBvbmVudCgiYS1tb2RhbCIpOwogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X2FfbW9kYWwsIHsKICAgIHZpc2libGU6ICRwcm9wcy52aXNpYmxlLAogICAgdGl0bGU6ICLnvJbovpHmtYHnqIsiLAogICAgb2tUZXh0OiAi5o+Q5LqkIiwKICAgIGNhbmNlbFRleHQ6ICLlj5bmtogiLAogICAgb25PazogX2NhY2hlWzRdIHx8IChfY2FjaGVbNF0gPSAkZXZlbnQgPT4gJHNldHVwLmhhbmRsZU9rKF9jdHguJHN0b3JlLnN0YXRlLnVzZXIuYWNjb3VudCkpLAogICAgb25DYW5jZWw6ICRzZXR1cC5oYW5kbGVDYW5jZWwsCiAgICB3aWR0aDogIjY4MHB4IgogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9hX2Zvcm0sIHsKICAgICAgbW9kZWw6ICRzZXR1cC5mb3JtU3RhdGUsCiAgICAgIHJlZjogImZvcm1SdWxlIiwKICAgICAgImxhYmVsLWNvbCI6IHsKICAgICAgICBzcGFuOiA0CiAgICAgIH0sCiAgICAgICJ3cmFwcGVyLWNvbCI6IHsKICAgICAgICBzcGFuOiAxOCwKICAgICAgICBvZmZzZXQ6IDEKICAgICAgfQogICAgfSwgewogICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfYV9mb3JtX2l0ZW0sIHsKICAgICAgICBsYWJlbDogIua1geeoi+WQjeensCIsCiAgICAgICAgbmFtZTogIm5hbWUiLAogICAgICAgIHJ1bGVzOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn5rWB56iL5ZCN56ew5b+F5aGr6aG5JwogICAgICAgIH1dCiAgICAgIH0sIHsKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfYV9pbnB1dCwgewogICAgICAgICAgInNob3ctY291bnQiOiAiIiwKICAgICAgICAgIG1heGxlbmd0aDogNTAsCiAgICAgICAgICAiYWxsb3ctY2xlYXIiOiAiIiwKICAgICAgICAgIHZhbHVlOiAkc2V0dXAuZm9ybVN0YXRlLm5hbWUsCiAgICAgICAgICAib25VcGRhdGU6dmFsdWUiOiBfY2FjaGVbMF0gfHwgKF9jYWNoZVswXSA9ICRldmVudCA9PiAkc2V0dXAuZm9ybVN0YXRlLm5hbWUgPSAkZXZlbnQpLAogICAgICAgICAgcGxhY2Vob2xkZXI6ICLor7fovpPlhaXmtYHnqIvlkI3np7AiCiAgICAgICAgfSwgbnVsbCwgOCwgWyJ2YWx1ZSJdKV0pLAogICAgICAgIF86IDEKICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2FfZm9ybV9pdGVtLCB7CiAgICAgICAgbGFiZWw6ICLmtYHnqIvmj4/ov7AiLAogICAgICAgIG5hbWU6ICJkZXNjcmlwdGlvbiIKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9hX3RleHRhcmVhLCB7CiAgICAgICAgICAic2hvdy1jb3VudCI6ICIiLAogICAgICAgICAgbWF4bGVuZ3RoOiAxMDAsCiAgICAgICAgICByb3dzOiA0LAogICAgICAgICAgdmFsdWU6ICRzZXR1cC5mb3JtU3RhdGUuZGVzY3JpcHRpb24sCiAgICAgICAgICAib25VcGRhdGU6dmFsdWUiOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9ICRldmVudCA9PiAkc2V0dXAuZm9ybVN0YXRlLmRlc2NyaXB0aW9uID0gJGV2ZW50KSwKICAgICAgICAgIHBsYWNlaG9sZGVyOiAi6K+36L6T5YWl5o+P6L+w5L+h5oGvIgogICAgICAgIH0sIG51bGwsIDgsIFsidmFsdWUiXSldKSwKICAgICAgICBfOiAxCiAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9hX2Zvcm1faXRlbSwgewogICAgICAgIGxhYmVsOiAi5Lia5Yqh57q/IiwKICAgICAgICBuYW1lOiAiYnVzaW5lc3NMaW5lIiwKICAgICAgICBydWxlczogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+S4muWKoee6v+W/heWhq+mhuScKICAgICAgICB9XQogICAgICB9LCB7CiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2Ffc2VsZWN0LCB7CiAgICAgICAgICB2YWx1ZTogJHNldHVwLmZvcm1TdGF0ZS5idXNpbmVzc0xpbmUsCiAgICAgICAgICAib25VcGRhdGU6dmFsdWUiOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9ICRldmVudCA9PiAkc2V0dXAuZm9ybVN0YXRlLmJ1c2luZXNzTGluZSA9ICRldmVudCksCiAgICAgICAgICBvcHRpb25zOiAkc2V0dXAuYnVzaW5lc3NMaW5lcywKICAgICAgICAgIHBsYWNlaG9sZGVyOiAi6K+36YCJ5oup5Lia5Yqh57q/IgogICAgICAgIH0sIG51bGwsIDgsIFsidmFsdWUiLCAib3B0aW9ucyJdKV0pLAogICAgICAgIF86IDEKICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2FfZm9ybV9pdGVtLCB7CiAgICAgICAgbGFiZWw6ICLmiYDlsZ7nsbvlnosiLAogICAgICAgIG5hbWU6ICJ0eXBlIiwKICAgICAgICBydWxlczogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+aJgOWxnuexu+Wei+W/heWhq+mhuScKICAgICAgICB9XQogICAgICB9LCB7CiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2Ffc2VsZWN0LCB7CiAgICAgICAgICB2YWx1ZTogJHNldHVwLmZvcm1TdGF0ZS50eXBlLAogICAgICAgICAgIm9uVXBkYXRlOnZhbHVlIjogX2NhY2hlWzNdIHx8IChfY2FjaGVbM10gPSAkZXZlbnQgPT4gJHNldHVwLmZvcm1TdGF0ZS50eXBlID0gJGV2ZW50KSwKICAgICAgICAgIG9wdGlvbnM6ICRzZXR1cC50eXBlcywKICAgICAgICAgIHBsYWNlaG9sZGVyOiAi6K+36YCJ5oup5rWB56iL57G75Z6LIgogICAgICAgIH0sIG51bGwsIDgsIFsidmFsdWUiLCAib3B0aW9ucyJdKV0pLAogICAgICAgIF86IDEKICAgICAgfSldKSwKICAgICAgXzogMQogICAgfSwgOCwgWyJtb2RlbCJdKV0pLAogICAgXzogMQogIH0sIDgsIFsidmlzaWJsZSIsICJvbkNhbmNlbCJdKTsKfQ=="},{"version":3,"mappings":";;;;;;;;uBACEA,aAyBUC;IAzBAC,OAAO,EAAEC,cAAO;IACjBC,KAAK,EAAC,MAAM;IACZC,MAAM,EAAC,IAAI;IACXC,UAAU,EAAC,IAAI;IACdC,IAAE,sCAAEC,eAAQ,CAACC,WAAM,CAACC,KAAK,CAACC,IAAI,CAACC,OAAO;IACtCC,QAAM,EAAEL,mBAAY;IACrBM,KAAK,EAAC;;sBAEb,MAgBS,CAhBTC,aAgBSC;MAhBAC,KAAK,EAAET,gBAAS;MAAEU,GAAG,EAAC,UAAU;MAAE,WAAS,EAAE;QAAAC;MAAA,CAAW;MAAG,aAAW,EAAE;QAAAA;QAAAC;MAAA;;wBAC/E,MAEc,CAFdL,aAEcM;QAFDC,KAAK,EAAC,MAAM;QAACC,IAAI,EAAC,MAAM;QAAEC,KAAK,EAAE;UAAAC;UAAAC;QAAA;;0BAC5C,MAAsG,CAAtGX,aAAsGY;UAA7F,YAAU,EAAV,EAAU;UAAEC,SAAS,EAAE,EAAE;UAAE,aAAW,EAAX,EAAW;UAASC,KAAK,EAAErB,gBAAS,CAACe,IAAI;gEAAdf,gBAAS,CAACe,IAAI;UAAEO,WAAW,EAAC;;;UAE7Ff,aAEcM;QAFDC,KAAK,EAAC,MAAM;QAACC,IAAI,EAAC;;0BAC7B,MAA+G,CAA/GR,aAA+GgB;UAAnG,YAAU,EAAV,EAAU;UAAEH,SAAS,EAAE,GAAG;UAAGI,IAAI,EAAE,CAAC;UAAUH,KAAK,EAAErB,gBAAS,CAACyB,WAAW;gEAArBzB,gBAAS,CAACyB,WAAW;UAAEH,WAAW,EAAC;;;UAEtGf,aAEcM;QAFDC,KAAK,EAAC,KAAK;QAACC,IAAI,EAAC,cAAc;QAAEC,KAAK,EAAE;UAAAC;UAAAC;QAAA;;0BACnD,MAA0G,CAA1GX,aAA0GmB;UAAxFL,KAAK,EAAErB,gBAAS,CAAC2B,YAAY;gEAAtB3B,gBAAS,CAAC2B,YAAY;UAAGC,OAAO,EAAE5B,oBAAa;UAAEsB,WAAW,EAAC;;;UAExFf,aAEcM;QAFDC,KAAK,EAAC,MAAM;QAACC,IAAI,EAAC,MAAM;QAAEC,KAAK,EAAE;UAAAC;UAAAC;QAAA;;0BAC5C,MAA2F,CAA3FX,aAA2FmB;UAAzEL,KAAK,EAAErB,gBAAS,CAAC6B,IAAI;gEAAd7B,gBAAS,CAAC6B,IAAI;UAAGD,OAAO,EAAE5B,YAAK;UAAEsB,WAAW,EAAC","names":["_createBlock","_component_a_modal","visible","$props","title","okText","cancelText","onOk","$setup","_ctx","state","user","account","onCancel","width","_createVNode","_component_a_form","model","ref","span","offset","_component_a_form_item","label","name","rules","required","message","_component_a_input","maxlength","value","placeholder","_component_a_textarea","rows","description","_component_a_select","businessLine","options","type"],"sourceRoot":"","sources":["/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/flows/FlowEditModal.vue"],"sourcesContent":["<template>\n  <a-modal :visible=\"visible\"\n           title=\"编辑流程\"\n           okText=\"提交\"\n           cancelText=\"取消\"\n           @ok=\"handleOk($store.state.user.account)\"\n           @cancel=\"handleCancel\"\n           width=\"680px\"\n  >\n    <a-form :model=\"formState\" ref=\"formRule\" :label-col=\"{ span: 4 }\" :wrapper-col=\"{ span: 18 ,offset: 1}\">\n      <a-form-item label=\"流程名称\" name=\"name\" :rules=\"[{ required: true, message: '流程名称必填项'}]\">\n        <a-input show-count :maxlength=\"50\" allow-clear v-model:value=\"formState.name\" placeholder=\"请输入流程名称\"/>\n      </a-form-item>\n      <a-form-item label=\"流程描述\" name=\"description\">\n        <a-textarea show-count :maxlength=\"100\" :rows=\"4\" v-model:value=\"formState.description\" placeholder=\"请输入描述信息\"/>\n      </a-form-item>\n      <a-form-item label=\"业务线\" name=\"businessLine\" :rules=\"[{ required: true, message: '业务线必填项'}]\">\n        <a-select v-model:value=\"formState.businessLine\" :options=\"businessLines\" placeholder=\"请选择业务线\"></a-select>\n      </a-form-item>\n      <a-form-item label=\"所属类型\" name=\"type\" :rules=\"[{ required: true, message: '所属类型必填项'}]\">\n        <a-select v-model:value=\"formState.type\" :options=\"types\" placeholder=\"请选择流程类型\"></a-select>\n      </a-form-item>\n<!--      <a-form-item label=\"版本号\" name=\"version\">-->\n<!--        <a-input v-model:value=\"formState.version\"/>-->\n<!--      </a-form-item>-->\n    </a-form>\n  </a-modal>\n</template>\n\n<script>\nimport {reactive, ref, watchEffect} from 'vue'\nimport {message} from \"ant-design-vue\";\nimport {editFlow} from \"@/api/request\";\nconst useFormState = (props,ctx)=>{\n  const formRule = ref()\n  let formState = reactive({\n    id: 0,\n    name: '',\n    description: '',\n    businessLine: '',\n    type: '',\n    // version: ''\n  })\n  const businessLines = [\n    {label: '业务线1', value: '业务线1'},\n    {label: '业务线2', value: '业务线2'},\n    {label: '业务线3', value: '业务线3'}\n  ]\n  const types = [\n    {label: '工具组件', value: 'tool'},\n    {label: '流程组件', value: 'flow'},\n    {label: '自动化组件', value: 'autotest'}\n  ]\n  const handleOk = (userAccount) => {\n    formRule.value.validateFields().then(async ()=>{\n      let req = {\n        id: formState.id,\n        name: formState.name,\n        description: formState.description,\n        businessLine: formState.businessLine,\n        type: formState.type,\n        // version: formState.version,\n        // status: 0, // 更新不修改状态值\n        // createdBy: userAccount, // 更新不修改创建人\n        updatedBy: userAccount\n      }\n      //调后端接口添加\n      await editFlow(req).then(res=>{\n        if (res?.code === 0) {\n          formRule.value.resetFields()\n          message.success('修改成功')\n          ctx.emit('confirm')\n        } else {\n          message.error('添加失败：'+res?.msg)\n        }\n      })\n    }).catch(() => {\n      // console.log(error)\n      message.error('请填写完必填项')\n    })\n  }\n  const handleCancel = () => {\n    formRule.value.resetFields()\n    ctx.emit('close')\n  }\n  return {\n    formState,\n    formRule,\n    businessLines,\n    types,\n    handleOk,\n    handleCancel\n  }\n}\n\nexport default {\n  name: \"FlowEditModal\",\n  props:['visible','data'],\n  emits:['close','confirm'],\n  setup(props,ctx) {\n    let {formState,formRule,businessLines,types,handleOk,handleCancel} = useFormState(props,ctx)\n    watchEffect(()=>{\n      if(props.visible) {\n        formState.id  = props?.data?.id\n        formState.name  = props?.data?.name\n        formState.description  = props?.data?.description\n        formState.businessLine  = props?.data?.businessLine\n        formState.type  = props?.data?.type\n        // formState.version  = props?.data?.version\n      }\n    })\n    return {\n      formState,\n      formRule,\n      businessLines,\n      types,\n      handleOk,\n      handleCancel\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}