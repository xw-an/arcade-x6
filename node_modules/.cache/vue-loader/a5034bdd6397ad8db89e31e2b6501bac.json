{"remainingRequest":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/tools/ToolDetailRecord.vue?vue&type=style&index=0&id=45c29328&lang=less","dependencies":[{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/tools/ToolDetailRecord.vue","mtime":1684825793598},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/css-loader/dist/cjs.js","mtime":1689430341713},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1689430343246},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/postcss-loader/src/index.js","mtime":1689430342188},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/less-loader/dist/cjs.js","mtime":1689430340771},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/cache-loader/dist/cjs.js","mtime":1689430340827},{"path":"/Users/xuewei/Desktop/开源项目/arcade-x6/node_modules/vue-loader-v16/dist/index.js","mtime":1689430342169}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci50b29sLWRldGFpbC1yZWNvcmQgLnRpbWVsaW5l4oCUZ3JvdXAgewogIHBhZGRpbmctdG9wOiAyNXB4OwogIHBhZGRpbmctbGVmdDogMjBweDsKfQoucmVjb3JkLXJlcS1sZWZ0IHsKICB3aWR0aDogNDklOwogIGhlaWdodDogYXV0bzsKICBiYWNrZ3JvdW5kOiAjZmZmOwogIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNlZGVkZWQ7CiAgbWluLWhlaWdodDogNjAwcHg7Cn0KLnJlY29yZC1yZXMtcmlnaHQgewogIHdpZHRoOiA0OSU7CiAgaGVpZ2h0OiBhdXRvOwogIGJhY2tncm91bmQ6ICNmZmY7CiAgbWluLWhlaWdodDogNjAwcHg7Cn0KLmZ1bGwtcGFyYW1zLW1vZGFsIHsKICAuYW50LW1vZGFsIHsKICAgIG1heC13aWR0aDogMTAwJTsKICAgIHRvcDogMDsKICAgIHBhZGRpbmctYm90dG9tOiAwOwogICAgbWFyZ2luOiAwOwogIH0KICAuYW50LW1vZGFsLWNvbnRlbnQgewogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBoZWlnaHQ6IGNhbGMoMTAwdmgpOwogIH0KICAuYW50LW1vZGFsLWJvZHkgewogICAgZmxleDogMTsKICB9Cn0KLnN5c3RlbS1uby1jb250ZW50IHsKICB3aWR0aDogMTAwJTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgcGFkZGluZy10b3A6IDEyMHB4OwogIG1hcmdpbi1ib3R0b206IDUwcHg7CiAgZm9udC1zaXplOiAxNXB4OwogIG1pbi1oZWlnaHQ6IDM4MHB4Owp9Ci5zeXN0ZW0tbm8tY29udGVudC1pbWFnZSB7CiAgbWFyZ2luOiAxMHB4Owp9Ci5zeXN0ZW0tbm8tY29udGVudC10ZXh0IHsKICBjb2xvcjogIzk5OTsKfQo="},{"version":3,"sources":["/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/tools/ToolDetailRecord.vue"],"names":[],"mappings":"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","file":"/Users/xuewei/Desktop/开源项目/arcade-x6/src/views/tools/ToolDetailRecord.vue","sourceRoot":"","sourcesContent":["<template>\n  <div style=\"width: 100%;height: 100%;background: #fff\" class=\"tool-detail-record\">\n    <a-timeline class=\"timeline—group\" v-if=\"timeLineList.length\">\n      <a-timeline-item v-for=\"(item,index) of timeLineList\" :key=\"index\">\n        <p>\n          <span>{{item.operator+'\\n'+$moment(item.createTime).format('YYYY-MM-DD HH:mm:ss')+'\\n'}}</span>\n          <a @click=\"showReqAndRes(item)\">请求参数&响应参数</a>\n        </p>\n      </a-timeline-item>\n    </a-timeline>\n    <div v-else class=\"system-no-content\">\n      <img src=\"@/assets/images/noDataDefault.svg\" class=\"system-no-content-image\"><br/>\n      <span class=\"system-no-content-text\">暂无运行记录</span>\n    </div>\n    <a-modal v-model:visible=\"visible\" title=\"请求参数&响应参数\"\n             :footer=\"null\"\n             width=\"100%\"\n             wrap-class-name=\"full-params-modal\"\n             :destroyOnClose=true\n             @cancel=\"handleCancel\"\n    >\n      <div style=\"width: 100%;display: flex\">\n        <div class=\"record-req-left\">\n          <a-button type=\"primary\" ghost>请求报文</a-button>\n          <codemirror\n              v-model=\"reqCode\"\n              :style=\"{ width: '100%', height: '100%' }\"\n              :autofocus=\"true\"\n              :indent-with-tab=\"true\"\n              :tabSize=\"2\"\n              :extensions=\"extensionsReq\"/>\n        </div>\n        <div class=\"record-res-right\">\n          <a-button type=\"primary\" ghost>返回报文</a-button>\n          <codemirror\n              v-model=\"resCode\"\n              :style=\"{ width: '100%', height: '100%' }\"\n              :autofocus=\"true\"\n              :indent-with-tab=\"true\"\n              :tabSize=\"2\"\n              :extensions=\"extensionsRes\"\n          />\n        </div>\n      </div>\n    </a-modal>\n  </div>\n</template>\n\n<script>\nimport {Codemirror} from \"vue-codemirror\";\nimport {ref} from \"vue\";\nimport {json} from \"@codemirror/lang-json\";\nimport {oneDark} from \"@codemirror/theme-one-dark\";\nimport {getLog} from \"@/api/request\";\nimport {useRouter} from \"vue-router\";\n\n// 弹出的modal\nconst useModalEffect = () => {\n  const visible = ref(false);\n  const reqCode = ref('')\n  const resCode = ref('')\n  const showReqAndRes = (item)=>{\n    visible.value = true\n    reqCode.value = item.requestParam?JSON.stringify(JSON.parse(item.requestParam),null,2):''\n    resCode.value = item.responseParam?JSON.stringify(JSON.parse(item.responseParam),null,2):''\n  }\n  const handleCancel = ()=>{\n    visible.value = false\n    reqCode.value = ''\n    resCode.value = ''\n  }\n  const extensionsReq = [json()]\n  const extensionsRes = [json(),oneDark]\n  return {\n    visible,\n    reqCode,\n    resCode,\n    showReqAndRes,\n    handleCancel,\n    extensionsReq,\n    extensionsRes\n  }\n}\n\n// 获取日志\nconst useLogEffect = ()=>{\n  const timeLineList = ref([])\n  const getLogs = async (id)=>{\n    let req = {toolId: id}\n    await getLog(req).then(res=>{\n      if (res.code === 0 && res.data?.testToolRunRecord.length){\n        timeLineList.value = res.data.testToolRunRecord\n      }\n    })\n  }\n  return {\n    timeLineList,getLogs\n  }\n}\n\nexport default {\n  name: \"ToolDetailRecord\",\n  components: {Codemirror},\n  setup() {\n    const { visible, reqCode, resCode, extensionsReq, extensionsRes, showReqAndRes, handleCancel } = useModalEffect()\n    const { timeLineList,getLogs } = useLogEffect()\n    const router = useRouter()\n    getLogs(router.currentRoute.value.params.id)\n    return {\n      timeLineList,visible, reqCode, resCode, extensionsReq, extensionsRes, showReqAndRes, handleCancel\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n.tool-detail-record .timeline—group {\n  padding-top: 25px;\n  padding-left: 20px;\n}\n.record-req-left {\n  width: 49%;\n  height: auto;\n  background: #fff;\n  border-right: 1px solid #ededed;\n  min-height: 600px;\n}\n.record-res-right {\n  width: 49%;\n  height: auto;\n  background: #fff;\n  min-height: 600px;\n}\n.full-params-modal {\n  .ant-modal {\n    max-width: 100%;\n    top: 0;\n    padding-bottom: 0;\n    margin: 0;\n  }\n  .ant-modal-content {\n    display: flex;\n    flex-direction: column;\n    height: calc(100vh);\n  }\n  .ant-modal-body {\n    flex: 1;\n  }\n}\n.system-no-content {\n  width: 100%;\n  text-align: center;\n  padding-top: 120px;\n  margin-bottom: 50px;\n  font-size: 15px;\n  min-height: 380px;\n}\n.system-no-content-image {\n  margin: 10px;\n}\n.system-no-content-text {\n  color: #999;\n}\n</style>\n"]}]}